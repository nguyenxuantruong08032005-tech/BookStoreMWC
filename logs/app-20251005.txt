2025-10-05 07:50:02.602 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - null null
2025-10-05 07:50:02.612 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:02.614 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-05 07:50:02.620 +07:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-10-05 07:50:02.621 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - 302 0 null 18.48ms
2025-10-05 07:50:02.637 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Account/Login?ReturnUrl=%2Fadmin%2Fbooks%3Farea%3DAdmin - null null
2025-10-05 07:50:02.645 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:02.646 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 07:50:02.651 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-10-05 07:50:02.684 +07:00 [INF] Executing ViewResult, running view Login.
2025-10-05 07:50:03.720 +07:00 [INF] Executed ViewResult - view Login executed in 1060.6489ms.
2025-10-05 07:50:03.720 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 1069.2248ms
2025-10-05 07:50:03.720 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 07:50:03.721 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Account/Login?ReturnUrl=%2Fadmin%2Fbooks%3Farea%3DAdmin - 200 null text/html; charset=utf-8 1083.3508ms
2025-10-05 07:50:03.780 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/css/output.css - null null
2025-10-05 07:50:03.793 +07:00 [INF] The file /css/output.css was not modified
2025-10-05 07:50:03.794 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/css/output.css - 304 null text/css 14.7344ms
2025-10-05 07:50:03.797 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 07:50:03.801 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:03.801 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 3.9835ms
2025-10-05 07:50:03.802 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 07:50:03.809 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 07:50:03.811 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:03.815 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 6.5923ms
2025-10-05 07:50:03.815 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 07:50:03.817 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 07:50:03.818 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:03.823 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 6.1155ms
2025-10-05 07:50:03.824 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 07:50:03.826 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 07:50:03.829 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:03.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 3.7732ms
2025-10-05 07:50:03.831 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 07:50:03.832 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 07:50:03.835 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:03.836 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 3.2994ms
2025-10-05 07:50:03.836 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 07:50:03.838 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - null null
2025-10-05 07:50:03.843 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:03.843 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - 404 0 null 4.8016ms
2025-10-05 07:50:03.843 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/bookverse-core.js, Response status code: 404
2025-10-05 07:50:03.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - null null
2025-10-05 07:50:03.850 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:03.853 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - 404 0 null 8.1736ms
2025-10-05 07:50:03.855 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/auth-validation.js, Response status code: 404
2025-10-05 07:50:04.034 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 07:50:04.140 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 130.2236ms
2025-10-05 07:50:04.141 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/login.js?v=5_yFtJP0kybVWGRgPOeI8tFeD4mu70Hwg3BRWviBUds - null null
2025-10-05 07:50:04.142 +07:00 [INF] The file /js/login.js was not modified
2025-10-05 07:50:04.142 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/login.js?v=5_yFtJP0kybVWGRgPOeI8tFeD4mu70Hwg3BRWviBUds - 304 null text/javascript 1.2875ms
2025-10-05 07:50:04.142 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/site.js?v=ZXp-KKengpsH6WmJm6Jx0S24LuE3sZ1PUD1PsWxDP5I - null null
2025-10-05 07:50:04.143 +07:00 [INF] The file /js/site.js was not modified
2025-10-05 07:50:04.143 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/site.js?v=ZXp-KKengpsH6WmJm6Jx0S24LuE3sZ1PUD1PsWxDP5I - 304 null text/javascript 0.9393ms
2025-10-05 07:50:04.143 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 07:50:04.144 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:04.146 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 2.622ms
2025-10-05 07:50:04.146 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 07:50:04.147 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 07:50:04.150 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:04.177 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 30.0688ms
2025-10-05 07:50:04.177 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 07:50:04.177 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 07:50:04.178 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:04.179 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.5662ms
2025-10-05 07:50:04.179 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 07:50:05.760 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5232/account/Login - application/x-www-form-urlencoded 290
2025-10-05 07:50:05.773 +07:00 [INF] CORS policy execution failed.
2025-10-05 07:50:05.774 +07:00 [INF] Request origin http://localhost:5232 does not have permission to access the resource.
2025-10-05 07:50:05.775 +07:00 [INF] Identity.Application was not authenticated. Failure message: Ticket expired
2025-10-05 07:50:05.775 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 07:50:05.787 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookStoreMVC.Models.ViewModels.LoginViewModel, System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-10-05 07:50:05.934 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-10-05 07:50:07.153 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-10-05 07:50:07.249 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-10-05 07:50:07.273 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 07:50:07.321 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-10-05 07:50:07.363 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-10-05 07:50:07.370 +07:00 [INF] User logged in.
2025-10-05 07:50:07.387 +07:00 [INF] Executing LocalRedirectResult, redirecting to /admin/books?area=Admin.
2025-10-05 07:50:07.387 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 1600.1897ms
2025-10-05 07:50:07.388 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 07:50:07.388 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5232/account/Login - 302 0 null 1628.8139ms
2025-10-05 07:50:07.418 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - null null
2025-10-05 07:50:07.419 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 07:50:07.422 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 07:50:07.432 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 07:50:07.477 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 07:50:07.485 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 07:50:07.487 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 07:50:07.502 +07:00 [INF] Executed ViewResult - view Books executed in 16.0883ms.
2025-10-05 07:50:07.503 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 79.9241ms
2025-10-05 07:50:07.503 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 07:50:07.505 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - 200 null text/html; charset=utf-8 86.2046ms
2025-10-05 07:50:07.564 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/css/output.css?v=YR0oZDuEY6GJkDXELbFPrMV0WcQ3SauY9qTKxDcI2S4 - null null
2025-10-05 07:50:07.572 +07:00 [INF] The file /css/output.css was not modified
2025-10-05 07:50:07.577 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/css/output.css?v=YR0oZDuEY6GJkDXELbFPrMV0WcQ3SauY9qTKxDcI2S4 - 304 null text/css 13.083ms
2025-10-05 07:50:07.581 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 07:50:07.590 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 9.2638ms
2025-10-05 07:50:07.591 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 07:50:07.593 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 2.0292ms
2025-10-05 07:50:07.593 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 07:50:11.196 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard?area=Admin - null null
2025-10-05 07:50:11.197 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 07:50:11.197 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 07:50:11.259 +07:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 07:50:11.261 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 07:50:11.338 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-10-05 07:50:11.432 +07:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-10-05 07:50:11.483 +07:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 07:50:11.493 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-10-05 07:50:11.576 +07:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-10-05 07:50:11.597 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-10-05 07:50:11.680 +07:00 [INF] Executed DbCommand (81ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-10-05 07:50:11.687 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 07:50:11.697 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 07:50:11.705 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-10-05 07:50:11.727 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-10-05 07:50:11.790 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-10-05 07:50:11.796 +07:00 [INF] Executed ViewResult - view Dashboard executed in 7.8678ms.
2025-10-05 07:50:11.797 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 599.1663ms
2025-10-05 07:50:11.797 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 07:50:11.797 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard?area=Admin - 200 null text/html; charset=utf-8 600.6731ms
2025-10-05 07:50:11.898 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 07:50:11.899 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.5723ms
2025-10-05 07:50:11.899 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 07:50:11.900 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 07:50:11.902 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 1.0146ms
2025-10-05 07:50:12.452 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - null null
2025-10-05 07:50:12.454 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - 404 0 null 1.1593ms
2025-10-05 07:50:12.454 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Admin/GetDashboardStats, Response status code: 404
2025-10-05 07:50:13.057 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - null null
2025-10-05 07:50:13.059 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 07:50:13.061 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 07:50:13.078 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 07:50:13.086 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 07:50:13.114 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 07:50:13.118 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 07:50:13.125 +07:00 [INF] Executed ViewResult - view Books executed in 7.0906ms.
2025-10-05 07:50:13.131 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 69.9922ms
2025-10-05 07:50:13.131 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 07:50:13.132 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - 200 null text/html; charset=utf-8 74.7528ms
2025-10-05 07:50:13.231 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 07:50:13.232 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3898ms
2025-10-05 07:50:13.317 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 07:50:13.390 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 74.1635ms
2025-10-05 07:50:13.397 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 07:50:14.655 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - null null
2025-10-05 07:50:14.658 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 07:50:14.693 +07:00 [INF] Route matched with {action = "Categories", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Categories(BookStoreMVC.Models.ViewModels.CategoryListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 07:50:14.776 +07:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 07:50:14.781 +07:00 [INF] Executing ViewResult, running view Categories.
2025-10-05 07:50:14.794 +07:00 [INF] Executed ViewResult - view Categories executed in 14.3641ms.
2025-10-05 07:50:14.795 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC) in 101.7394ms
2025-10-05 07:50:14.795 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 07:50:14.796 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - 200 null text/html; charset=utf-8 141.0447ms
2025-10-05 07:50:14.906 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 07:50:14.907 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 1.1635ms
2025-10-05 07:50:14.908 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 07:50:14.909 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.4171ms
2025-10-05 07:50:14.909 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 07:50:17.304 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - null null
2025-10-05 07:50:17.310 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 07:50:17.312 +07:00 [INF] Route matched with {action = "Categories", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Categories(BookStoreMVC.Models.ViewModels.CategoryListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 07:50:17.383 +07:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 07:50:17.387 +07:00 [INF] Executing ViewResult, running view Categories.
2025-10-05 07:50:17.391 +07:00 [INF] Executed ViewResult - view Categories executed in 3.6307ms.
2025-10-05 07:50:17.394 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC) in 81.6376ms
2025-10-05 07:50:17.394 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 07:50:17.416 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - 200 null text/html; charset=utf-8 111.6496ms
2025-10-05 07:50:17.543 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 07:50:17.544 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 1.1062ms
2025-10-05 07:50:17.661 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 07:50:17.671 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 9.3025ms
2025-10-05 07:50:17.671 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 07:50:24.623 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - null null
2025-10-05 07:50:24.629 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 07:50:24.630 +07:00 [INF] Route matched with {action = "Categories", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Categories(BookStoreMVC.Models.ViewModels.CategoryListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 07:50:24.637 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 07:50:24.646 +07:00 [INF] Executing ViewResult, running view Categories.
2025-10-05 07:50:24.650 +07:00 [INF] Executed ViewResult - view Categories executed in 3.9978ms.
2025-10-05 07:50:24.652 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC) in 21.0332ms
2025-10-05 07:50:24.655 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 07:50:24.655 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - 200 null text/html; charset=utf-8 32.4876ms
2025-10-05 07:50:24.684 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 07:50:24.685 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 07:50:24.685 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1897ms
2025-10-05 07:50:24.685 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.7095ms
2025-10-05 07:50:24.686 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:34:47.657 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-05 09:34:49.468 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 09:34:49.480 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 09:34:49.519 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 09:34:49.679 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 09:34:49.715 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 09:34:49.721 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 09:34:49.737 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 09:34:49.754 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 09:34:49.760 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 09:34:50.107 +07:00 [INF] Executed DbCommand (120ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 09:34:50.176 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 09:34:50.177 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 09:34:50.178 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 09:34:50.209 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.254 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.255 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.280 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 09:34:50.293 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 09:34:50.298 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.301 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.304 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.305 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.306 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.309 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.310 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.311 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.319 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 09:34:50.334 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 09:34:50.350 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-05 09:34:50.362 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 09:34:50.374 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 09:34:50.589 +07:00 [ERR] Failed executing DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Size = 450), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 450), @p50='?' (DbType = Int32), @p51='?' (DbType = DateTime2), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = Int32), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Size = 450), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = Int32), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p74='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Int32), @p78='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p79='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p80='?' (DbType = Int32), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32), @p87='?' (DbType = Int32), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p90='?' (DbType = Int32), @p91='?' (DbType = Int32), @p92='?' (DbType = Int32), @p93='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = Int32), @p98='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p99='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p100='?' (DbType = Int32), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p105='?' (DbType = Int32), @p106='?' (DbType = Int32), @p107='?' (DbType = Int32), @p108='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p109='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p110='?' (DbType = Int32), @p111='?' (DbType = Int32), @p112='?' (DbType = Int32), @p113='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p114='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p115='?' (DbType = Int32), @p116='?' (DbType = Int32), @p117='?' (DbType = Int32), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49),
(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59);
MERGE [OrderItems] USING (
VALUES (@p60, @p61, @p62, @p63, @p64, 0),
(@p65, @p66, @p67, @p68, @p69, 1),
(@p70, @p71, @p72, @p73, @p74, 2),
(@p75, @p76, @p77, @p78, @p79, 3),
(@p80, @p81, @p82, @p83, @p84, 4),
(@p85, @p86, @p87, @p88, @p89, 5),
(@p90, @p91, @p92, @p93, @p94, 6),
(@p95, @p96, @p97, @p98, @p99, 7),
(@p100, @p101, @p102, @p103, @p104, 8),
(@p105, @p106, @p107, @p108, @p109, 9),
(@p110, @p111, @p112, @p113, @p114, 10),
(@p115, @p116, @p117, @p118, @p119, 11)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 09:34:50.604 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:495c24e0-da3d-4409-906c-864fd41c7d60
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:495c24e0-da3d-4409-906c-864fd41c7d60
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 09:34:50.611 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:495c24e0-da3d-4409-906c-864fd41c7d60
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 09:34:50.743 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:495c24e0-da3d-4409-906c-864fd41c7d60
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 181
2025-10-05 09:34:50.919 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 09:34:50.920 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 09:34:50.922 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 09:34:50.931 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 09:34:50.938 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 09:34:50.943 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 09:34:50.944 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 09:34:50.946 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 09:34:50.951 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 09:34:50.956 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 09:34:50.958 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 09:34:50.961 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 09:34:50.963 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 09:34:50.964 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.970 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.974 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.977 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 09:34:50.980 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 09:34:50.981 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.986 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.989 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.991 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.993 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.997 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:50.999 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:51.001 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 09:34:51.003 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 09:34:51.004 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 09:34:51.006 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 09:34:51.007 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 09:34:51.021 +07:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p34='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = Int32), @p47='?' (DbType = Int32), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p50='?' (DbType = Int32), @p51='?' (DbType = Int32), @p52='?' (DbType = Int32), @p53='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p54='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (DbType = Int32), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29);
MERGE [OrderItems] USING (
VALUES (@p30, @p31, @p32, @p33, @p34, 0),
(@p35, @p36, @p37, @p38, @p39, 1),
(@p40, @p41, @p42, @p43, @p44, 2),
(@p45, @p46, @p47, @p48, @p49, 3),
(@p50, @p51, @p52, @p53, @p54, 4),
(@p55, @p56, @p57, @p58, @p59, 5),
(@p60, @p61, @p62, @p63, @p64, 6)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 09:34:51.023 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:495c24e0-da3d-4409-906c-864fd41c7d60
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:495c24e0-da3d-4409-906c-864fd41c7d60
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 09:34:51.026 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:495c24e0-da3d-4409-906c-864fd41c7d60
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 09:34:51.029 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:495c24e0-da3d-4409-906c-864fd41c7d60
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 291
2025-10-05 09:34:51.032 +07:00 [INF] BookStore application starting up...
2025-10-05 09:34:51.095 +07:00 [INF] Now listening on: http://localhost:5232
2025-10-05 09:34:51.095 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-05 09:34:51.095 +07:00 [INF] Hosting environment: Development
2025-10-05 09:34:51.095 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-10-05 09:34:56.040 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 09:34:56.047 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-05 09:34:56.228 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-10-05 09:34:56.263 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-10-05 09:34:56.300 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-10-05 09:34:56.304 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 09:34:56.313 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-10-05 09:34:56.332 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 09:34:56.360 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 09:34:56.562 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 09:34:56.623 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 09:34:56.679 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 09:34:56.725 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 09:34:56.741 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 09:34:56.755 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 09:34:56.769 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 09:34:56.789 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 09:34:56.817 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 09:34:56.830 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 09:34:56.875 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 09:34:56.892 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 09:34:56.918 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 09:34:56.958 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 09:34:57.159 +07:00 [INF] Executed ViewResult - view Index executed in 205.0377ms.
2025-10-05 09:34:57.163 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 801.9073ms
2025-10-05 09:34:57.163 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 09:34:57.170 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 1134.1584ms
2025-10-05 09:34:57.208 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 09:34:57.221 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 13.2592ms
2025-10-05 09:34:57.223 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 09:34:57.232 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:34:57.238 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 6.2518ms
2025-10-05 09:34:57.238 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 09:34:57.248 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 09:34:57.248 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 09:34:57.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 09:34:57.251 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 09:34:57.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 09:34:57.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 18.708ms
2025-10-05 09:34:57.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 20.0377ms
2025-10-05 09:34:57.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 16.6629ms
2025-10-05 09:34:57.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 20.5399ms
2025-10-05 09:34:57.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 30.2984ms
2025-10-05 09:34:57.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 17.402ms
2025-10-05 09:34:57.269 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 09:34:57.269 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 09:34:57.269 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 09:34:57.269 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 09:34:57.269 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 09:34:57.269 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 09:34:57.277 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 09:34:57.277 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 09:34:57.279 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.9343ms
2025-10-05 09:34:57.279 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 2.0035ms
2025-10-05 09:34:57.279 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 09:34:57.279 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 09:35:03.965 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-10-05 09:35:03.973 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 09:35:03.987 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:35:04.008 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 09:35:04.030 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 09:35:04.039 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-10-05 09:35:04.047 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-10-05 09:35:04.052 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 09:35:04.061 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-10-05 09:35:04.074 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-10-05 09:35:04.080 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-10-05 09:35:04.103 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-10-05 09:35:04.135 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 09:35:04.149 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:35:04.153 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-05 09:35:04.163 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-10-05 09:35:04.226 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-10-05 09:35:04.329 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-10-05 09:35:04.533 +07:00 [INF] Executed ViewResult - view Dashboard executed in 301.9513ms.
2025-10-05 09:35:04.536 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 548.7805ms
2025-10-05 09:35:04.537 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 09:35:04.540 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 574.9824ms
2025-10-05 09:35:04.614 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:35:04.616 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.9603ms
2025-10-05 09:35:04.616 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:35:04.620 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:35:04.620 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.635ms
2025-10-05 09:35:04.911 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - null null
2025-10-05 09:35:04.914 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - 404 0 null 2.5272ms
2025-10-05 09:35:04.914 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Admin/GetDashboardStats, Response status code: 404
2025-10-05 09:36:01.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - null null
2025-10-05 09:36:01.733 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 09:36:02.184 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:02.309 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 09:36:02.316 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 09:36:02.340 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 09:36:02.365 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 09:36:02.483 +07:00 [INF] Executed ViewResult - view Books executed in 129.3642ms.
2025-10-05 09:36:02.483 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 298.3594ms
2025-10-05 09:36:02.483 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 09:36:02.485 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - 200 null text/html; charset=utf-8 755.6228ms
2025-10-05 09:36:02.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:02.538 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.5893ms
2025-10-05 09:36:02.538 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:02.549 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:02.550 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4457ms
2025-10-05 09:36:02.882 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - null null
2025-10-05 09:36:02.885 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 09:36:02.885 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:02.890 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 09:36:02.892 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 09:36:02.893 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 09:36:02.894 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 09:36:02.898 +07:00 [INF] Executed ViewResult - view Books executed in 4.4143ms.
2025-10-05 09:36:02.898 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 13.5167ms
2025-10-05 09:36:02.898 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 09:36:02.899 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - 200 null text/html; charset=utf-8 16.3252ms
2025-10-05 09:36:02.919 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:02.921 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 2.3744ms
2025-10-05 09:36:02.921 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:02.923 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:02.923 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2948ms
2025-10-05 09:36:03.733 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - null null
2025-10-05 09:36:03.734 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 09:36:03.741 +07:00 [INF] Route matched with {action = "Categories", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Categories(BookStoreMVC.Models.ViewModels.CategoryListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:03.749 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 09:36:03.753 +07:00 [INF] Executing ViewResult, running view Categories.
2025-10-05 09:36:03.767 +07:00 [INF] Executed ViewResult - view Categories executed in 14.6447ms.
2025-10-05 09:36:03.767 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC) in 26.1124ms
2025-10-05 09:36:03.767 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 09:36:03.767 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - 200 null text/html; charset=utf-8 33.9329ms
2025-10-05 09:36:03.794 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:03.796 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.416ms
2025-10-05 09:36:03.797 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:03.798 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:03.798 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.5414ms
2025-10-05 09:36:04.799 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - null null
2025-10-05 09:36:04.801 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:04.805 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:04.809 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:04.814 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:04.831 +07:00 [INF] Executed ViewResult - view Users executed in 18.09ms.
2025-10-05 09:36:04.831 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 26.0104ms
2025-10-05 09:36:04.831 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:04.832 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - 200 null text/html; charset=utf-8 32.8131ms
2025-10-05 09:36:04.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:04.859 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 2.6807ms
2025-10-05 09:36:04.860 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:04.869 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:04.871 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 1.2354ms
2025-10-05 09:36:09.636 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users/details/1b0975a3-8c9a-4635-8f0a-b7f820601187 - null null
2025-10-05 09:36:09.638 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:09.642 +07:00 [INF] Route matched with {action = "UserDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetails(System.String) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:09.735 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-10-05 09:36:09.752 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2025-10-05 09:36:09.779 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0 AND [o].[Status] = 3
2025-10-05 09:36:09.791 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[UserId] = @__userId_0
2025-10-05 09:36:09.801 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [WishlistItems] AS [w]
WHERE [w].[UserId] = @__userId_0
2025-10-05 09:36:09.823 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[Status], [o1].[Total], [o1].[CreatedAt], [s].[BookTitle], [s].[Quantity], [s].[Total], [s].[Id], [s].[Id0]
FROM (
    SELECT TOP(@__p_1) [o].[Id], [o].[Status], [o].[Total], [o].[CreatedAt]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_0
    ORDER BY [o].[CreatedAt] DESC
) AS [o1]
LEFT JOIN (
    SELECT [b].[Title] AS [BookTitle], [o0].[Quantity], [o0].[Total], [o0].[Id], [b].[Id] AS [Id0], [o0].[OrderId]
    FROM [OrderItems] AS [o0]
    LEFT JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [s] ON [o1].[Id] = [s].[OrderId]
ORDER BY [o1].[CreatedAt] DESC, [o1].[Id], [s].[Id]
2025-10-05 09:36:09.832 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_1) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[Rating]
    FROM [Reviews] AS [r]
    WHERE [r].[UserId] = @__userId_0
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 09:36:09.834 +07:00 [INF] Executing ViewResult, running view UserDetails.
2025-10-05 09:36:09.863 +07:00 [INF] Executed ViewResult - view UserDetails executed in 28.9604ms.
2025-10-05 09:36:09.863 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC) in 220.6124ms
2025-10-05 09:36:09.863 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:09.863 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users/details/1b0975a3-8c9a-4635-8f0a-b7f820601187 - 200 null text/html; charset=utf-8 227.0276ms
2025-10-05 09:36:09.892 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:09.894 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 2.0374ms
2025-10-05 09:36:09.895 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:09.908 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:09.909 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.7267ms
2025-10-05 09:36:11.818 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - null null
2025-10-05 09:36:11.819 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:11.819 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:11.821 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:11.822 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:11.826 +07:00 [INF] Executed ViewResult - view Users executed in 3.5785ms.
2025-10-05 09:36:11.826 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 6.4452ms
2025-10-05 09:36:11.826 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:11.826 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - 200 null text/html; charset=utf-8 8.5817ms
2025-10-05 09:36:11.865 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:11.865 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.8027ms
2025-10-05 09:36:13.833 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users/details/c8a37b74-0ea3-42ac-88f9-f6c4dc6fc818 - null null
2025-10-05 09:36:13.835 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:13.835 +07:00 [INF] Route matched with {action = "UserDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetails(System.String) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:13.837 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-10-05 09:36:13.839 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2025-10-05 09:36:13.839 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0 AND [o].[Status] = 3
2025-10-05 09:36:13.841 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[UserId] = @__userId_0
2025-10-05 09:36:13.842 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [WishlistItems] AS [w]
WHERE [w].[UserId] = @__userId_0
2025-10-05 09:36:13.845 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[Status], [o1].[Total], [o1].[CreatedAt], [s].[BookTitle], [s].[Quantity], [s].[Total], [s].[Id], [s].[Id0]
FROM (
    SELECT TOP(@__p_1) [o].[Id], [o].[Status], [o].[Total], [o].[CreatedAt]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_0
    ORDER BY [o].[CreatedAt] DESC
) AS [o1]
LEFT JOIN (
    SELECT [b].[Title] AS [BookTitle], [o0].[Quantity], [o0].[Total], [o0].[Id], [b].[Id] AS [Id0], [o0].[OrderId]
    FROM [OrderItems] AS [o0]
    LEFT JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [s] ON [o1].[Id] = [s].[OrderId]
ORDER BY [o1].[CreatedAt] DESC, [o1].[Id], [s].[Id]
2025-10-05 09:36:13.847 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_1) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[Rating]
    FROM [Reviews] AS [r]
    WHERE [r].[UserId] = @__userId_0
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 09:36:13.848 +07:00 [INF] Executing ViewResult, running view UserDetails.
2025-10-05 09:36:13.851 +07:00 [INF] Executed ViewResult - view UserDetails executed in 3.1348ms.
2025-10-05 09:36:13.852 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC) in 16.5738ms
2025-10-05 09:36:13.852 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:13.852 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users/details/c8a37b74-0ea3-42ac-88f9-f6c4dc6fc818 - 200 null text/html; charset=utf-8 18.4786ms
2025-10-05 09:36:13.893 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:13.895 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 2.0549ms
2025-10-05 09:36:13.896 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:13.896 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:13.896 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2586ms
2025-10-05 09:36:14.562 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - null null
2025-10-05 09:36:14.564 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:14.564 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:14.566 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:14.567 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:14.570 +07:00 [INF] Executed ViewResult - view Users executed in 3.9002ms.
2025-10-05 09:36:14.571 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 6.6349ms
2025-10-05 09:36:14.571 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:14.571 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - 200 null text/html; charset=utf-8 8.7998ms
2025-10-05 09:36:14.600 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:14.601 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2169ms
2025-10-05 09:36:15.449 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users/details/372e7ee5-e157-4ea0-a45a-c1620ca41986 - null null
2025-10-05 09:36:15.450 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:15.451 +07:00 [INF] Route matched with {action = "UserDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetails(System.String) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:15.452 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-10-05 09:36:15.453 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2025-10-05 09:36:15.454 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0 AND [o].[Status] = 3
2025-10-05 09:36:15.455 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[UserId] = @__userId_0
2025-10-05 09:36:15.456 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [WishlistItems] AS [w]
WHERE [w].[UserId] = @__userId_0
2025-10-05 09:36:15.457 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[Status], [o1].[Total], [o1].[CreatedAt], [s].[BookTitle], [s].[Quantity], [s].[Total], [s].[Id], [s].[Id0]
FROM (
    SELECT TOP(@__p_1) [o].[Id], [o].[Status], [o].[Total], [o].[CreatedAt]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_0
    ORDER BY [o].[CreatedAt] DESC
) AS [o1]
LEFT JOIN (
    SELECT [b].[Title] AS [BookTitle], [o0].[Quantity], [o0].[Total], [o0].[Id], [b].[Id] AS [Id0], [o0].[OrderId]
    FROM [OrderItems] AS [o0]
    LEFT JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [s] ON [o1].[Id] = [s].[OrderId]
ORDER BY [o1].[CreatedAt] DESC, [o1].[Id], [s].[Id]
2025-10-05 09:36:15.459 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_1) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[Rating]
    FROM [Reviews] AS [r]
    WHERE [r].[UserId] = @__userId_0
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 09:36:15.459 +07:00 [INF] Executing ViewResult, running view UserDetails.
2025-10-05 09:36:15.462 +07:00 [INF] Executed ViewResult - view UserDetails executed in 2.8159ms.
2025-10-05 09:36:15.462 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC) in 11.5244ms
2025-10-05 09:36:15.462 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:15.462 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users/details/372e7ee5-e157-4ea0-a45a-c1620ca41986 - 200 null text/html; charset=utf-8 12.9007ms
2025-10-05 09:36:15.494 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:15.495 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.981ms
2025-10-05 09:36:15.495 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:15.496 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:15.497 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3991ms
2025-10-05 09:36:16.176 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - null null
2025-10-05 09:36:16.177 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:16.177 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:16.179 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:16.180 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:16.182 +07:00 [INF] Executed ViewResult - view Users executed in 2.1693ms.
2025-10-05 09:36:16.183 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 5.219ms
2025-10-05 09:36:16.183 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:16.183 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - 200 null text/html; charset=utf-8 6.9063ms
2025-10-05 09:36:16.223 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:16.224 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3409ms
2025-10-05 09:36:16.980 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users/details/6d364dbd-4184-4645-84aa-453ade3bda03 - null null
2025-10-05 09:36:16.981 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:16.982 +07:00 [INF] Route matched with {action = "UserDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetails(System.String) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:16.983 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-10-05 09:36:16.985 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2025-10-05 09:36:16.986 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0 AND [o].[Status] = 3
2025-10-05 09:36:16.987 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[UserId] = @__userId_0
2025-10-05 09:36:16.988 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [WishlistItems] AS [w]
WHERE [w].[UserId] = @__userId_0
2025-10-05 09:36:16.990 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[Status], [o1].[Total], [o1].[CreatedAt], [s].[BookTitle], [s].[Quantity], [s].[Total], [s].[Id], [s].[Id0]
FROM (
    SELECT TOP(@__p_1) [o].[Id], [o].[Status], [o].[Total], [o].[CreatedAt]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_0
    ORDER BY [o].[CreatedAt] DESC
) AS [o1]
LEFT JOIN (
    SELECT [b].[Title] AS [BookTitle], [o0].[Quantity], [o0].[Total], [o0].[Id], [b].[Id] AS [Id0], [o0].[OrderId]
    FROM [OrderItems] AS [o0]
    LEFT JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [s] ON [o1].[Id] = [s].[OrderId]
ORDER BY [o1].[CreatedAt] DESC, [o1].[Id], [s].[Id]
2025-10-05 09:36:16.993 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_1) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[Rating]
    FROM [Reviews] AS [r]
    WHERE [r].[UserId] = @__userId_0
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 09:36:16.993 +07:00 [INF] Executing ViewResult, running view UserDetails.
2025-10-05 09:36:16.995 +07:00 [INF] Executed ViewResult - view UserDetails executed in 1.7413ms.
2025-10-05 09:36:16.995 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC) in 13.4474ms
2025-10-05 09:36:16.995 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:16.995 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users/details/6d364dbd-4184-4645-84aa-453ade3bda03 - 200 null text/html; charset=utf-8 15.0279ms
2025-10-05 09:36:17.031 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:17.035 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 3.1007ms
2025-10-05 09:36:17.035 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:17.038 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:17.039 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2921ms
2025-10-05 09:36:17.484 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - null null
2025-10-05 09:36:17.485 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:17.485 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:17.487 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:17.487 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:17.489 +07:00 [INF] Executed ViewResult - view Users executed in 1.4746ms.
2025-10-05 09:36:17.489 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 4.0106ms
2025-10-05 09:36:17.489 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:17.490 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - 200 null text/html; charset=utf-8 5.8778ms
2025-10-05 09:36:17.522 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:17.522 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3512ms
2025-10-05 09:36:18.293 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users/details/c8a37b74-0ea3-42ac-88f9-f6c4dc6fc818 - null null
2025-10-05 09:36:18.295 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:18.295 +07:00 [INF] Route matched with {action = "UserDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetails(System.String) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:18.297 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-10-05 09:36:18.298 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2025-10-05 09:36:18.300 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0 AND [o].[Status] = 3
2025-10-05 09:36:18.301 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[UserId] = @__userId_0
2025-10-05 09:36:18.302 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [WishlistItems] AS [w]
WHERE [w].[UserId] = @__userId_0
2025-10-05 09:36:18.304 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[Status], [o1].[Total], [o1].[CreatedAt], [s].[BookTitle], [s].[Quantity], [s].[Total], [s].[Id], [s].[Id0]
FROM (
    SELECT TOP(@__p_1) [o].[Id], [o].[Status], [o].[Total], [o].[CreatedAt]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_0
    ORDER BY [o].[CreatedAt] DESC
) AS [o1]
LEFT JOIN (
    SELECT [b].[Title] AS [BookTitle], [o0].[Quantity], [o0].[Total], [o0].[Id], [b].[Id] AS [Id0], [o0].[OrderId]
    FROM [OrderItems] AS [o0]
    LEFT JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [s] ON [o1].[Id] = [s].[OrderId]
ORDER BY [o1].[CreatedAt] DESC, [o1].[Id], [s].[Id]
2025-10-05 09:36:18.305 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_1) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[Rating]
    FROM [Reviews] AS [r]
    WHERE [r].[UserId] = @__userId_0
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 09:36:18.306 +07:00 [INF] Executing ViewResult, running view UserDetails.
2025-10-05 09:36:18.308 +07:00 [INF] Executed ViewResult - view UserDetails executed in 2.1231ms.
2025-10-05 09:36:18.308 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC) in 13.3121ms
2025-10-05 09:36:18.309 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:18.309 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users/details/c8a37b74-0ea3-42ac-88f9-f6c4dc6fc818 - 200 null text/html; charset=utf-8 15.5427ms
2025-10-05 09:36:18.349 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:18.383 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:18.383 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2482ms
2025-10-05 09:36:18.384 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 34.6293ms
2025-10-05 09:36:18.384 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:18.664 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - null null
2025-10-05 09:36:18.665 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:18.665 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:18.667 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:18.668 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:18.671 +07:00 [INF] Executed ViewResult - view Users executed in 3.0156ms.
2025-10-05 09:36:18.671 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 6.0297ms
2025-10-05 09:36:18.672 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:18.672 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - 200 null text/html; charset=utf-8 8.062ms
2025-10-05 09:36:18.720 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:18.720 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2109ms
2025-10-05 09:36:19.870 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users/details/bd6b7610-c36e-4630-a530-728287322946 - null null
2025-10-05 09:36:19.871 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:19.871 +07:00 [INF] Route matched with {action = "UserDetails", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserDetails(System.String) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:19.873 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-10-05 09:36:19.874 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2025-10-05 09:36:19.875 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0 AND [o].[Status] = 3
2025-10-05 09:36:19.875 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[UserId] = @__userId_0
2025-10-05 09:36:19.876 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [WishlistItems] AS [w]
WHERE [w].[UserId] = @__userId_0
2025-10-05 09:36:19.878 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[Status], [o1].[Total], [o1].[CreatedAt], [s].[BookTitle], [s].[Quantity], [s].[Total], [s].[Id], [s].[Id0]
FROM (
    SELECT TOP(@__p_1) [o].[Id], [o].[Status], [o].[Total], [o].[CreatedAt]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_0
    ORDER BY [o].[CreatedAt] DESC
) AS [o1]
LEFT JOIN (
    SELECT [b].[Title] AS [BookTitle], [o0].[Quantity], [o0].[Total], [o0].[Id], [b].[Id] AS [Id0], [o0].[OrderId]
    FROM [OrderItems] AS [o0]
    LEFT JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [s] ON [o1].[Id] = [s].[OrderId]
ORDER BY [o1].[CreatedAt] DESC, [o1].[Id], [s].[Id]
2025-10-05 09:36:19.879 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_1) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[Rating]
    FROM [Reviews] AS [r]
    WHERE [r].[UserId] = @__userId_0
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 09:36:19.880 +07:00 [INF] Executing ViewResult, running view UserDetails.
2025-10-05 09:36:19.882 +07:00 [INF] Executed ViewResult - view UserDetails executed in 2.1728ms.
2025-10-05 09:36:19.882 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC) in 10.9841ms
2025-10-05 09:36:19.882 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.UserDetails (BookStoreMVC)'
2025-10-05 09:36:19.882 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users/details/bd6b7610-c36e-4630-a530-728287322946 - 200 null text/html; charset=utf-8 12.5947ms
2025-10-05 09:36:19.926 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:19.927 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.0087ms
2025-10-05 09:36:19.927 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:19.930 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:19.930 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2011ms
2025-10-05 09:36:20.485 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - null null
2025-10-05 09:36:20.486 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:20.486 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:20.487 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:20.488 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:20.490 +07:00 [INF] Executed ViewResult - view Users executed in 1.9554ms.
2025-10-05 09:36:20.490 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 4.4255ms
2025-10-05 09:36:20.490 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:20.491 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - 200 null text/html; charset=utf-8 5.8974ms
2025-10-05 09:36:20.528 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:20.528 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2145ms
2025-10-05 09:36:25.653 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm=H - null null
2025-10-05 09:36:25.654 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:25.654 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:25.656 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:25.657 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:25.658 +07:00 [INF] Executed ViewResult - view Users executed in 1.1882ms.
2025-10-05 09:36:25.658 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 3.8269ms
2025-10-05 09:36:25.658 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:25.658 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm=H - 200 null text/html; charset=utf-8 5.3568ms
2025-10-05 09:36:25.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:25.722 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.9164ms
2025-10-05 09:36:25.722 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:25.723 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:25.723 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2527ms
2025-10-05 09:36:44.175 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm=Tr%E1%BA%A7n+Th%E1%BB%8B - null null
2025-10-05 09:36:44.176 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:44.177 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:44.178 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:44.179 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:44.181 +07:00 [INF] Executed ViewResult - view Users executed in 1.8124ms.
2025-10-05 09:36:44.181 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 4.0888ms
2025-10-05 09:36:44.181 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:44.181 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm=Tr%E1%BA%A7n+Th%E1%BB%8B - 200 null text/html; charset=utf-8 5.8122ms
2025-10-05 09:36:44.222 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:44.223 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.9855ms
2025-10-05 09:36:44.223 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:44.224 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:44.224 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2079ms
2025-10-05 09:36:45.914 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - null null
2025-10-05 09:36:45.915 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:45.915 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:45.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:45.917 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:45.919 +07:00 [INF] Executed ViewResult - view Users executed in 1.9973ms.
2025-10-05 09:36:45.919 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 4.3867ms
2025-10-05 09:36:45.919 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:45.920 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - 200 null text/html; charset=utf-8 5.7463ms
2025-10-05 09:36:45.951 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:45.952 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.2737ms
2025-10-05 09:36:45.953 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:45.959 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:45.960 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 1.0084ms
2025-10-05 09:36:46.125 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - null null
2025-10-05 09:36:46.127 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:46.127 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:46.129 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:46.129 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:46.131 +07:00 [INF] Executed ViewResult - view Users executed in 1.3755ms.
2025-10-05 09:36:46.131 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 3.6242ms
2025-10-05 09:36:46.131 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:46.131 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - 200 null text/html; charset=utf-8 5.9011ms
2025-10-05 09:36:46.167 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:46.169 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.6145ms
2025-10-05 09:36:46.169 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:46.170 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:46.171 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2535ms
2025-10-05 09:36:46.455 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - null null
2025-10-05 09:36:46.456 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:46.456 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:46.458 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:46.458 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:46.460 +07:00 [INF] Executed ViewResult - view Users executed in 1.7694ms.
2025-10-05 09:36:46.460 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 3.6783ms
2025-10-05 09:36:46.460 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:46.460 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - 200 null text/html; charset=utf-8 4.6908ms
2025-10-05 09:36:46.496 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:46.498 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.3392ms
2025-10-05 09:36:46.498 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:46.500 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:46.500 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2647ms
2025-10-05 09:36:46.788 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - null null
2025-10-05 09:36:46.789 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:46.789 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:46.790 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:46.791 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:46.792 +07:00 [INF] Executed ViewResult - view Users executed in 1.3059ms.
2025-10-05 09:36:46.792 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 3.3722ms
2025-10-05 09:36:46.792 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:46.792 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - 200 null text/html; charset=utf-8 4.858ms
2025-10-05 09:36:46.828 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:46.829 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 09:36:46.829 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3004ms
2025-10-05 09:36:46.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.2842ms
2025-10-05 09:36:46.830 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 09:36:47.220 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - null null
2025-10-05 09:36:47.221 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:47.221 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:47.223 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:47.224 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:47.226 +07:00 [INF] Executed ViewResult - view Users executed in 2.1838ms.
2025-10-05 09:36:47.226 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 5.0668ms
2025-10-05 09:36:47.226 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:47.227 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - 200 null text/html; charset=utf-8 6.7615ms
2025-10-05 09:36:47.273 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:47.274 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3339ms
2025-10-05 09:36:48.712 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - null null
2025-10-05 09:36:48.712 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:48.713 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 09:36:48.715 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 09:36:48.715 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 09:36:48.716 +07:00 [INF] Executed ViewResult - view Users executed in 1.216ms.
2025-10-05 09:36:48.716 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 3.6975ms
2025-10-05 09:36:48.716 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 09:36:48.717 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?searchTerm= - 200 null text/html; charset=utf-8 4.8074ms
2025-10-05 09:36:48.752 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 09:36:48.753 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.8098ms
2025-10-05 15:56:27.903 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-05 15:56:30.431 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 15:56:30.445 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 15:56:30.476 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 15:56:30.553 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 15:56:30.572 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 15:56:30.573 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 15:56:30.579 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 15:56:30.591 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 15:56:30.598 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 15:56:31.257 +07:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 15:56:31.297 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 15:56:31.298 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 15:56:31.299 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 15:56:31.333 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.392 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.393 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.412 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 15:56:31.431 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 15:56:31.434 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.435 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.436 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.437 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.438 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.439 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.441 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.442 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.453 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 15:56:31.459 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 15:56:31.469 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-05 15:56:31.481 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 15:56:31.491 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 15:56:31.686 +07:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Size = 450), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = Int32), @p47='?' (DbType = Int32), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p50='?' (DbType = Int32), @p51='?' (DbType = Int32), @p52='?' (DbType = Int32), @p53='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p54='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (DbType = Int32), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = Int32), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p74='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Int32), @p78='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p79='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39);
MERGE [OrderItems] USING (
VALUES (@p40, @p41, @p42, @p43, @p44, 0),
(@p45, @p46, @p47, @p48, @p49, 1),
(@p50, @p51, @p52, @p53, @p54, 2),
(@p55, @p56, @p57, @p58, @p59, 3),
(@p60, @p61, @p62, @p63, @p64, 4),
(@p65, @p66, @p67, @p68, @p69, 5),
(@p70, @p71, @p72, @p73, @p74, 6),
(@p75, @p76, @p77, @p78, @p79, 7)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 15:56:31.702 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78cd6660-8f3d-4b4f-98ff-da5738b5b05a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78cd6660-8f3d-4b4f-98ff-da5738b5b05a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 15:56:31.707 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78cd6660-8f3d-4b4f-98ff-da5738b5b05a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 15:56:31.747 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78cd6660-8f3d-4b4f-98ff-da5738b5b05a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 181
2025-10-05 15:56:31.944 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 15:56:31.945 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 15:56:31.945 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 15:56:31.949 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 15:56:31.951 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 15:56:31.952 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 15:56:31.952 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 15:56:31.952 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 15:56:31.953 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 15:56:31.955 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 15:56:31.956 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 15:56:31.957 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 15:56:31.958 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 15:56:31.959 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.961 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.962 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.962 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 15:56:31.963 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 15:56:31.964 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.964 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.965 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.966 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.967 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.968 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.969 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.969 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 15:56:31.970 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 15:56:31.971 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 15:56:31.972 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 15:56:31.973 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 15:56:31.982 +07:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Size = 450), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 450), @p50='?' (DbType = Int32), @p51='?' (DbType = Int32), @p52='?' (DbType = Int32), @p53='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p54='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (DbType = Int32), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = Int32), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p74='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Int32), @p78='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p79='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p80='?' (DbType = Int32), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32), @p87='?' (DbType = Int32), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p90='?' (DbType = Int32), @p91='?' (DbType = Int32), @p92='?' (DbType = Int32), @p93='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = Int32), @p98='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p99='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p100='?' (DbType = Int32), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
MERGE [OrderItems] USING (
VALUES (@p50, @p51, @p52, @p53, @p54, 0),
(@p55, @p56, @p57, @p58, @p59, 1),
(@p60, @p61, @p62, @p63, @p64, 2),
(@p65, @p66, @p67, @p68, @p69, 3),
(@p70, @p71, @p72, @p73, @p74, 4),
(@p75, @p76, @p77, @p78, @p79, 5),
(@p80, @p81, @p82, @p83, @p84, 6),
(@p85, @p86, @p87, @p88, @p89, 7),
(@p90, @p91, @p92, @p93, @p94, 8),
(@p95, @p96, @p97, @p98, @p99, 9),
(@p100, @p101, @p102, @p103, @p104, 10)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 15:56:31.984 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78cd6660-8f3d-4b4f-98ff-da5738b5b05a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78cd6660-8f3d-4b4f-98ff-da5738b5b05a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 15:56:31.987 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78cd6660-8f3d-4b4f-98ff-da5738b5b05a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 15:56:31.989 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78cd6660-8f3d-4b4f-98ff-da5738b5b05a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 291
2025-10-05 15:56:31.991 +07:00 [INF] BookStore application starting up...
2025-10-05 15:56:32.078 +07:00 [INF] Now listening on: http://localhost:5232
2025-10-05 15:56:32.078 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-05 15:56:32.078 +07:00 [INF] Hosting environment: Development
2025-10-05 15:56:32.078 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-10-05 15:56:32.242 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 15:56:32.250 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-05 15:56:32.303 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 15:56:32.317 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 15:56:32.514 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 15:56:32.563 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 15:56:32.578 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 15:56:32.599 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 15:56:32.612 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 15:56:32.619 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 15:56:32.629 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 15:56:32.639 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 15:56:32.658 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 15:56:32.668 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 15:56:32.688 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 15:56:32.703 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 15:56:32.721 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 15:56:32.770 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 15:56:33.025 +07:00 [INF] Executed ViewResult - view Index executed in 258.4809ms.
2025-10-05 15:56:33.030 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 712.5582ms
2025-10-05 15:56:33.031 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 15:56:33.040 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 799.5856ms
2025-10-05 15:56:33.042 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 15:56:33.051 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 8.1387ms
2025-10-05 15:56:33.052 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 15:56:33.052 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 15:56:33.053 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 15:56:33.054 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 15:56:33.054 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 15:56:33.056 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 15:56:33.057 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 15:56:33.057 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.9447ms
2025-10-05 15:56:33.057 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 2.6078ms
2025-10-05 15:56:33.057 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 4.6822ms
2025-10-05 15:56:33.057 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 3.5382ms
2025-10-05 15:56:33.057 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 2.9659ms
2025-10-05 15:56:33.057 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 15:56:33.057 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 15:56:33.057 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 15:56:33.057 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 15:56:33.057 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 15:56:33.059 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 2.3954ms
2025-10-05 15:56:33.061 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 15:56:33.061 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 15:56:33.061 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 15:56:33.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 2.8215ms
2025-10-05 15:56:33.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 2.8118ms
2025-10-05 15:56:33.064 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 15:56:33.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 2.8118ms
2025-10-05 15:56:33.065 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 15:56:33.065 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 15:56:44.065 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 15:56:44.065 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 15:56:44.066 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 15:56:44.072 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 15:56:44.079 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 15:56:44.087 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 15:56:44.090 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 15:56:44.091 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 15:56:44.093 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 15:56:44.094 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 15:56:44.095 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 15:56:44.098 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 15:56:44.102 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 15:56:44.105 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 15:56:44.106 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 15:56:44.116 +07:00 [INF] Executed ViewResult - view Index executed in 9.6708ms.
2025-10-05 15:56:44.116 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 50.6102ms
2025-10-05 15:56:44.117 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 15:56:44.118 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 52.7303ms
2025-10-05 15:56:44.139 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 15:56:44.140 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.9621ms
2025-10-05 15:56:44.140 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 15:56:44.141 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 15:56:44.141 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 15:56:44.142 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3268ms
2025-10-05 15:56:44.142 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.4835ms
2025-10-05 15:56:44.142 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 15:56:44.149 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 15:56:44.150 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.9046ms
2025-10-05 15:56:44.150 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 15:56:44.150 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 15:56:44.150 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 15:56:44.151 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.9423ms
2025-10-05 15:56:44.151 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.9325ms
2025-10-05 15:56:44.151 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 15:56:44.151 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 15:56:44.179 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 15:56:44.179 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 15:56:44.179 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 15:56:44.181 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 2.019ms
2025-10-05 15:56:44.181 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 2.0191ms
2025-10-05 15:56:44.181 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 2.0189ms
2025-10-05 15:56:44.182 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 15:56:44.182 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 15:56:44.182 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 15:56:44.187 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 15:56:44.188 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.6458ms
2025-10-05 15:56:44.188 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 15:56:44.206 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/favicon.ico - null null
2025-10-05 15:56:44.213 +07:00 [INF] The file /favicon.ico was not modified
2025-10-05 15:56:44.214 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/favicon.ico - 304 null image/x-icon 8.2287ms
2025-10-05 15:57:05.843 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 15:57:05.844 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.8756ms
2025-10-05 15:57:05.844 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 15:57:32.174 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 15:57:32.175 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 15:57:32.175 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 15:57:32.192 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 15:57:32.196 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 15:57:32.198 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 15:57:32.200 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 15:57:32.200 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 15:57:32.201 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 15:57:32.202 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 15:57:32.203 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 15:57:32.206 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 15:57:32.208 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 15:57:32.211 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 15:57:32.212 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 15:57:32.220 +07:00 [INF] Executed ViewResult - view Index executed in 7.5078ms.
2025-10-05 15:57:32.220 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 44.4926ms
2025-10-05 15:57:32.220 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 15:57:32.220 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 45.8723ms
2025-10-05 15:57:32.259 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 15:57:32.260 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.0134ms
2025-10-05 15:57:32.260 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 15:57:32.269 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 15:57:32.270 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.1007ms
2025-10-05 15:57:32.270 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 15:57:32.274 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 15:57:32.274 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3017ms
2025-10-05 15:57:32.280 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 15:57:32.282 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.5764ms
2025-10-05 15:57:32.282 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 15:57:32.284 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 15:57:32.288 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 15:57:32.288 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 2.9853ms
2025-10-05 15:57:32.288 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 15:57:32.289 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 15:57:32.289 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.9053ms
2025-10-05 15:57:32.289 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 15:57:32.289 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.6927ms
2025-10-05 15:57:32.289 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 15:57:32.358 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 15:57:32.360 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.6ms
2025-10-05 15:57:32.360 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 15:57:32.362 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 15:57:32.363 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.2261ms
2025-10-05 15:57:32.364 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 15:57:32.403 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 15:57:32.406 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 3.3834ms
2025-10-05 15:57:32.407 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 15:57:32.416 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 15:57:32.417 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.9876ms
2025-10-05 15:57:32.418 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:00:30.247 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:00:30.248 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:00:30.248 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:00:30.251 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:00:30.256 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:00:30.258 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:00:30.261 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:00:30.262 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:00:30.264 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:00:30.266 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:00:30.268 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:00:30.269 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:00:30.272 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:00:30.273 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:00:30.274 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:00:30.278 +07:00 [INF] Executed ViewResult - view Index executed in 4.6001ms.
2025-10-05 16:00:30.278 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 30.4607ms
2025-10-05 16:00:30.278 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:00:30.279 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 32.0013ms
2025-10-05 16:00:30.312 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:00:30.313 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.8901ms
2025-10-05 16:00:30.313 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:00:30.317 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:00:30.317 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3863ms
2025-10-05 16:00:30.318 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:00:30.319 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.9399ms
2025-10-05 16:00:30.319 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:00:30.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:00:30.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:00:30.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.542ms
2025-10-05 16:00:30.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.831ms
2025-10-05 16:00:30.323 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:00:30.323 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:00:30.324 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:00:30.324 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:00:30.325 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.7564ms
2025-10-05 16:00:30.325 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:00:30.325 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.2867ms
2025-10-05 16:00:30.325 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:00:30.327 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:00:30.328 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.0759ms
2025-10-05 16:00:30.328 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:00:30.329 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:00:30.330 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.3641ms
2025-10-05 16:00:30.330 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:00:30.331 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:00:30.332 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.1344ms
2025-10-05 16:00:30.332 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:00:30.356 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:00:30.356 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.8566ms
2025-10-05 16:00:30.357 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:00:32.503 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:00:32.504 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:00:32.504 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:00:32.507 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:00:32.512 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:00:32.518 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:00:32.520 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:00:32.522 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:00:32.523 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:00:32.524 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:00:32.526 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:00:32.528 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:00:32.531 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:00:32.533 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:00:32.534 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:00:32.537 +07:00 [INF] Executed ViewResult - view Index executed in 3.2901ms.
2025-10-05 16:00:32.537 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 33.2253ms
2025-10-05 16:00:32.538 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:00:32.540 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 37.5977ms
2025-10-05 16:00:32.572 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:00:32.574 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.5661ms
2025-10-05 16:00:32.574 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:00:32.582 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:00:32.587 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 4.824ms
2025-10-05 16:00:32.588 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:00:32.630 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 41.9516ms
2025-10-05 16:00:32.634 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:00:32.637 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:00:32.638 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.7191ms
2025-10-05 16:00:32.639 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:00:32.639 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:00:32.642 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 2.4397ms
2025-10-05 16:00:32.643 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:00:32.645 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:00:32.651 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 5.73ms
2025-10-05 16:00:32.651 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:00:32.652 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:00:32.654 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.8394ms
2025-10-05 16:00:32.655 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:00:32.656 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.0315ms
2025-10-05 16:00:32.657 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:00:32.659 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:00:32.666 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:00:32.669 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 3.2084ms
2025-10-05 16:00:32.669 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:00:32.675 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:00:32.676 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:00:32.676 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.0453ms
2025-10-05 16:00:32.676 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:00:32.676 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.476ms
2025-10-05 16:00:32.676 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:00:32.910 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:00:32.912 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:00:32.912 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:00:32.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:00:32.920 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:00:32.925 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:00:32.929 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:00:32.930 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:00:32.933 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:00:32.934 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:00:32.937 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:00:32.940 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:00:32.942 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:00:32.946 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:00:32.947 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:00:32.954 +07:00 [INF] Executed ViewResult - view Index executed in 7.1356ms.
2025-10-05 16:00:32.954 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 41.7295ms
2025-10-05 16:00:32.954 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:00:32.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 44.2376ms
2025-10-05 16:00:32.994 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:00:32.995 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.6133ms
2025-10-05 16:00:32.995 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:00:32.998 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:00:32.998 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2491ms
2025-10-05 16:00:33.000 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:00:33.001 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.2997ms
2025-10-05 16:00:33.001 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:00:33.003 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:00:33.004 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:00:33.005 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 1.22ms
2025-10-05 16:00:33.005 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:00:33.005 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:00:33.006 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.593ms
2025-10-05 16:00:33.006 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:00:33.007 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:00:33.008 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.4275ms
2025-10-05 16:00:33.008 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:00:33.008 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 4.3086ms
2025-10-05 16:00:33.009 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:00:33.016 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:00:33.018 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 2.0733ms
2025-10-05 16:00:33.018 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:00:33.022 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:00:33.023 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:00:33.024 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.3101ms
2025-10-05 16:00:33.024 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:00:33.026 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 3.9978ms
2025-10-05 16:00:33.027 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:00:33.054 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:00:33.056 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.679ms
2025-10-05 16:00:33.056 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:00:33.173 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:00:33.173 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:00:33.174 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:00:33.179 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:00:33.186 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:00:33.193 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:00:33.197 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:00:33.200 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:00:33.202 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:00:33.203 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:00:33.205 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:00:33.208 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:00:33.211 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:00:33.219 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:00:33.222 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:00:33.226 +07:00 [INF] Executed ViewResult - view Index executed in 4.4925ms.
2025-10-05 16:00:33.227 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 52.8534ms
2025-10-05 16:00:33.227 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:00:33.228 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 54.9724ms
2025-10-05 16:00:33.272 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:00:33.272 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.5399ms
2025-10-05 16:00:33.272 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:00:33.278 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:00:33.278 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3243ms
2025-10-05 16:00:33.279 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:00:33.281 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:00:33.282 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:00:33.282 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.5997ms
2025-10-05 16:00:33.282 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:00:33.282 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.5767ms
2025-10-05 16:00:33.282 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:00:33.281 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.633ms
2025-10-05 16:00:33.283 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:00:33.284 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:00:33.284 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:00:33.286 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.8093ms
2025-10-05 16:00:33.286 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:00:33.286 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 2.0772ms
2025-10-05 16:00:33.286 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:00:33.290 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:00:33.290 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.6642ms
2025-10-05 16:00:33.290 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:00:33.292 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:00:33.293 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.6362ms
2025-10-05 16:00:33.293 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:00:33.293 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:00:33.294 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.8806ms
2025-10-05 16:00:33.295 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:00:33.411 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:00:33.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.4104ms
2025-10-05 16:00:33.413 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:00:34.771 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:00:34.773 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:00:34.784 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:00:34.789 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:00:34.794 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:00:34.799 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:00:34.802 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:00:34.805 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:00:34.811 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:00:34.814 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:00:34.816 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:00:34.820 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:00:34.823 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:00:34.828 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:00:34.834 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:00:34.864 +07:00 [INF] Executed ViewResult - view Index executed in 34.5133ms.
2025-10-05 16:00:34.864 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 80.2671ms
2025-10-05 16:00:34.864 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:00:34.865 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 93.2968ms
2025-10-05 16:00:34.900 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:00:34.900 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.7132ms
2025-10-05 16:00:34.900 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:00:34.915 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:00:34.915 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3443ms
2025-10-05 16:00:34.918 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:00:34.919 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:00:34.919 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:00:34.922 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:00:34.922 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:00:34.922 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:00:34.922 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.536ms
2025-10-05 16:00:34.922 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:00:34.922 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 3.6111ms
2025-10-05 16:00:34.922 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 4.6809ms
2025-10-05 16:00:34.922 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:00:34.922 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:00:34.923 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.3647ms
2025-10-05 16:00:34.923 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:00:34.923 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.6618ms
2025-10-05 16:00:34.923 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:00:34.923 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 3.9336ms
2025-10-05 16:00:34.923 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:00:34.928 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:00:34.928 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.5941ms
2025-10-05 16:00:34.928 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:00:34.930 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:00:34.930 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:00:34.930 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.3207ms
2025-10-05 16:00:34.930 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:00:34.930 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.7749ms
2025-10-05 16:00:34.930 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:02:14.503 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:02:14.503 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:02:14.506 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:02:14.508 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:02:14.511 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:02:14.514 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:02:14.517 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:02:14.518 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:02:14.519 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:02:14.520 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:02:14.522 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:02:14.524 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:02:14.526 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:02:14.527 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:02:14.529 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:02:14.560 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:02:14.560 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:02:14.562 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:02:14.564 +07:00 [INF] Executed ViewResult - view Index executed in 36.6424ms.
2025-10-05 16:02:14.564 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 58.4264ms
2025-10-05 16:02:14.564 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:02:14.564 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 61.3974ms
2025-10-05 16:02:14.566 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:02:14.568 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:02:14.570 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:02:14.573 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:02:14.574 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:02:14.575 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:02:14.578 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:02:14.580 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:02:14.581 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:02:14.583 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:02:14.585 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:02:14.585 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:02:14.588 +07:00 [INF] Executed ViewResult - view Index executed in 2.5117ms.
2025-10-05 16:02:14.588 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 25.5969ms
2025-10-05 16:02:14.588 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:02:14.588 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 28.0463ms
2025-10-05 16:02:14.624 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:02:14.625 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.3811ms
2025-10-05 16:02:14.625 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:02:14.627 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:02:14.628 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:02:14.628 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:02:14.629 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3202ms
2025-10-05 16:02:14.631 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 3.5718ms
2025-10-05 16:02:14.631 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 2.0842ms
2025-10-05 16:02:14.631 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:02:14.631 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:02:14.635 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:02:14.636 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.5913ms
2025-10-05 16:02:14.636 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:02:14.637 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:02:14.638 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.7304ms
2025-10-05 16:02:14.638 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:02:14.680 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:02:14.680 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.5299ms
2025-10-05 16:02:14.680 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:02:14.683 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:02:14.683 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:02:14.683 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.3325ms
2025-10-05 16:02:14.683 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.4041ms
2025-10-05 16:02:14.683 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:02:14.683 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:02:14.697 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:02:14.698 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.3555ms
2025-10-05 16:02:14.698 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:02:14.703 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:02:14.703 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.4695ms
2025-10-05 16:02:14.703 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:02:59.132 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:02:59.133 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:02:59.133 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:02:59.136 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:02:59.139 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:02:59.141 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:02:59.142 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:02:59.143 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:02:59.144 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:02:59.144 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:02:59.146 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:02:59.147 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:02:59.149 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:02:59.150 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:02:59.153 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:02:59.160 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:02:59.161 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:02:59.168 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:02:59.172 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:02:59.172 +07:00 [INF] Executed ViewResult - view Index executed in 21.3561ms.
2025-10-05 16:02:59.172 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 39.144ms
2025-10-05 16:02:59.173 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:02:59.173 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 40.2263ms
2025-10-05 16:02:59.177 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:02:59.182 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:02:59.184 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:02:59.186 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:02:59.188 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:02:59.190 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:02:59.192 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:02:59.194 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:02:59.198 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:02:59.202 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:02:59.203 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:02:59.206 +07:00 [INF] Executed ViewResult - view Index executed in 3.9427ms.
2025-10-05 16:02:59.206 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 38.1533ms
2025-10-05 16:02:59.206 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:02:59.206 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 46.5671ms
2025-10-05 16:02:59.225 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:02:59.225 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:02:59.225 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:02:59.227 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:02:59.228 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:02:59.231 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:02:59.233 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:02:59.234 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:02:59.235 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:02:59.237 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:02:59.239 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:02:59.242 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:02:59.245 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:02:59.248 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:02:59.249 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:02:59.253 +07:00 [INF] Executed ViewResult - view Index executed in 4.5364ms.
2025-10-05 16:02:59.253 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 28.1051ms
2025-10-05 16:02:59.253 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:02:59.253 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 28.8227ms
2025-10-05 16:02:59.305 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:02:59.306 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.7927ms
2025-10-05 16:02:59.306 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:02:59.310 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:02:59.311 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:02:59.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2352ms
2025-10-05 16:02:59.312 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:02:59.314 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:02:59.316 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 4.5324ms
2025-10-05 16:02:59.316 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 2.0249ms
2025-10-05 16:02:59.316 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 5.6046ms
2025-10-05 16:02:59.316 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:02:59.316 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:02:59.316 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:02:59.321 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:02:59.321 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.4731ms
2025-10-05 16:02:59.321 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:02:59.369 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:02:59.371 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.7856ms
2025-10-05 16:02:59.371 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:02:59.372 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:02:59.372 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:02:59.373 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.5853ms
2025-10-05 16:02:59.373 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.5004ms
2025-10-05 16:02:59.373 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:02:59.373 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:02:59.390 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:02:59.391 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.592ms
2025-10-05 16:02:59.391 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:02:59.394 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:02:59.394 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.465ms
2025-10-05 16:02:59.395 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:03:02.648 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:03:02.648 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:03:02.649 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:03:02.650 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:03:02.678 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:03:02.679 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:03:02.681 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:03:02.682 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:03:02.683 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:03:02.683 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:03:02.684 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:03:02.685 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:03:02.686 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:03:02.687 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:03:02.690 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:03:02.698 +07:00 [INF] Executed ViewResult - view Index executed in 9.5048ms.
2025-10-05 16:03:02.698 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 49.1985ms
2025-10-05 16:03:02.698 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:03:02.698 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 49.7373ms
2025-10-05 16:03:02.700 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:03:02.700 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:03:02.704 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:03:02.707 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:03:02.709 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:03:02.712 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:03:02.713 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:03:02.714 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:03:02.715 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:03:02.717 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:03:02.720 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:03:02.721 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:03:02.723 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:03:02.724 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:03:02.725 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:03:02.727 +07:00 [INF] Executed ViewResult - view Index executed in 2.2273ms.
2025-10-05 16:03:02.727 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 22.6294ms
2025-10-05 16:03:02.727 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:03:02.727 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 27.3735ms
2025-10-05 16:03:02.761 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:03:02.762 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.3613ms
2025-10-05 16:03:02.762 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:03:02.764 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:03:02.764 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:03:02.764 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3159ms
2025-10-05 16:03:02.767 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 2.9656ms
2025-10-05 16:03:02.767 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:03:02.768 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:03:02.768 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.7971ms
2025-10-05 16:03:02.769 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:03:02.772 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:03:02.772 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.5464ms
2025-10-05 16:03:02.773 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:03:02.811 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:03:02.811 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:03:02.811 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.168ms
2025-10-05 16:03:02.811 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.3489ms
2025-10-05 16:03:02.811 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:03:02.811 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:03:02.811 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:03:02.811 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.277ms
2025-10-05 16:03:02.812 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:03:02.816 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:03:02.816 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:03:02.816 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.2652ms
2025-10-05 16:03:02.816 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.3487ms
2025-10-05 16:03:02.816 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:03:02.816 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:03:03.069 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:03:03.071 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.6417ms
2025-10-05 16:03:03.072 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:03:03.848 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:03:03.848 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:03:03.849 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:03:03.854 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:03:03.860 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:03:03.865 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:03:03.871 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:03:03.873 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:03:03.876 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:03:03.877 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:03:03.883 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:03:03.886 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:03:03.892 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:03:03.895 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:03:03.896 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:03:03.900 +07:00 [INF] Executed ViewResult - view Index executed in 3.7374ms.
2025-10-05 16:03:03.900 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 51.5479ms
2025-10-05 16:03:03.900 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:03:03.901 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 52.8751ms
2025-10-05 16:03:03.950 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:03:03.950 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.4358ms
2025-10-05 16:03:03.950 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:03:03.953 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:03:03.953 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:03:03.953 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.337ms
2025-10-05 16:03:03.953 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.4252ms
2025-10-05 16:03:03.953 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:03:03.958 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:03:03.960 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.6184ms
2025-10-05 16:03:03.960 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:03:03.964 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:03:03.964 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.6361ms
2025-10-05 16:03:03.964 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:03:03.967 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:03:03.968 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.6705ms
2025-10-05 16:03:03.968 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:03:04.011 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:03:04.012 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:03:04.012 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.5938ms
2025-10-05 16:03:04.012 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:03:04.012 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:03:04.012 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.3861ms
2025-10-05 16:03:04.012 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.1439ms
2025-10-05 16:03:04.012 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:03:04.012 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:03:04.029 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:03:04.029 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.3509ms
2025-10-05 16:03:04.030 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:03:04.034 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:03:04.035 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.5592ms
2025-10-05 16:03:04.035 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:03:07.232 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:03:07.232 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:03:07.232 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:03:07.235 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:03:07.238 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:03:07.240 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:03:07.243 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:03:07.243 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:03:07.244 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:03:07.244 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:03:07.245 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:03:07.247 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:03:07.249 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:03:07.250 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:03:07.253 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:03:07.263 +07:00 [INF] Executed ViewResult - view Index executed in 10.355ms.
2025-10-05 16:03:07.263 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 30.8687ms
2025-10-05 16:03:07.263 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:03:07.263 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 31.8443ms
2025-10-05 16:03:07.305 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:03:07.306 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:03:07.306 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2274ms
2025-10-05 16:03:07.306 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.3764ms
2025-10-05 16:03:07.306 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:03:07.309 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:03:07.310 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.0226ms
2025-10-05 16:03:07.310 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:03:07.310 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:03:07.311 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:03:07.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.4086ms
2025-10-05 16:03:07.311 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:03:07.311 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:03:07.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.2037ms
2025-10-05 16:03:07.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.5215ms
2025-10-05 16:03:07.311 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:03:07.311 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:03:07.315 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:03:07.315 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.4895ms
2025-10-05 16:03:07.315 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:03:07.316 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:03:07.317 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:03:07.317 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:03:07.317 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.7388ms
2025-10-05 16:03:07.318 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:03:07.318 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:03:07.318 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.4935ms
2025-10-05 16:03:07.318 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.8283ms
2025-10-05 16:03:07.319 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:03:07.319 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:03:07.319 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 2.9519ms
2025-10-05 16:03:07.319 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:06:31.889 +07:00 [INF] Application is shutting down...
2025-10-05 16:06:41.991 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:06:42.025 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 16:06:42.037 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 16:06:42.082 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 16:06:42.088 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:06:42.090 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 16:06:42.093 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 16:06:42.099 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 16:06:42.102 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 16:06:53.553 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-05 16:06:54.214 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:06:54.223 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 16:06:54.243 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 16:06:54.290 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 16:06:54.302 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:06:54.303 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 16:06:54.309 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 16:06:54.316 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 16:06:54.319 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 16:06:54.527 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:06:54.563 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:06:54.564 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:06:54.566 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:06:54.579 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:54.605 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:54.606 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:54.621 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:06:54.631 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:06:54.633 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:54.634 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:54.634 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:54.635 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:54.635 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:54.636 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:54.636 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:54.637 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:54.643 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:06:54.649 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:06:54.659 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-05 16:06:54.666 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 16:06:54.674 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 16:06:54.903 +07:00 [ERR] Failed executing DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Size = 450), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 450), @p50='?' (DbType = Int32), @p51='?' (DbType = DateTime2), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = Int32), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Size = 450), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = Int32), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p74='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Int32), @p78='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p79='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p80='?' (DbType = Int32), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32), @p87='?' (DbType = Int32), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p90='?' (DbType = Int32), @p91='?' (DbType = Int32), @p92='?' (DbType = Int32), @p93='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = Int32), @p98='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p99='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p100='?' (DbType = Int32), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p105='?' (DbType = Int32), @p106='?' (DbType = Int32), @p107='?' (DbType = Int32), @p108='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p109='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49),
(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59);
MERGE [OrderItems] USING (
VALUES (@p60, @p61, @p62, @p63, @p64, 0),
(@p65, @p66, @p67, @p68, @p69, 1),
(@p70, @p71, @p72, @p73, @p74, 2),
(@p75, @p76, @p77, @p78, @p79, 3),
(@p80, @p81, @p82, @p83, @p84, 4),
(@p85, @p86, @p87, @p88, @p89, 5),
(@p90, @p91, @p92, @p93, @p94, 6),
(@p95, @p96, @p97, @p98, @p99, 7),
(@p100, @p101, @p102, @p103, @p104, 8),
(@p105, @p106, @p107, @p108, @p109, 9)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 16:06:54.924 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b944e1c-c5fa-4cc1-ae54-20d92033d78b
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b944e1c-c5fa-4cc1-ae54-20d92033d78b
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 16:06:54.929 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b944e1c-c5fa-4cc1-ae54-20d92033d78b
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 16:06:54.958 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b944e1c-c5fa-4cc1-ae54-20d92033d78b
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 181
2025-10-05 16:06:55.100 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:06:55.100 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 16:06:55.101 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 16:06:55.104 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 16:06:55.105 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:06:55.106 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 16:06:55.107 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 16:06:55.107 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 16:06:55.108 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 16:06:55.110 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:06:55.110 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:06:55.111 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:06:55.112 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:06:55.113 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:55.114 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:55.115 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:55.117 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:06:55.119 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:06:55.120 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:55.121 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:55.124 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:55.126 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:55.127 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:55.128 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:55.128 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:55.129 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:06:55.131 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:06:55.132 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:06:55.134 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 16:06:55.135 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 16:06:55.147 +07:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Size = 450), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 450), @p50='?' (DbType = Int32), @p51='?' (DbType = Int32), @p52='?' (DbType = Int32), @p53='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p54='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (DbType = Int32), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = Int32), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p74='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Int32), @p78='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p79='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p80='?' (DbType = Int32), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32), @p87='?' (DbType = Int32), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p90='?' (DbType = Int32), @p91='?' (DbType = Int32), @p92='?' (DbType = Int32), @p93='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = Int32), @p98='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p99='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p100='?' (DbType = Int32), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
MERGE [OrderItems] USING (
VALUES (@p50, @p51, @p52, @p53, @p54, 0),
(@p55, @p56, @p57, @p58, @p59, 1),
(@p60, @p61, @p62, @p63, @p64, 2),
(@p65, @p66, @p67, @p68, @p69, 3),
(@p70, @p71, @p72, @p73, @p74, 4),
(@p75, @p76, @p77, @p78, @p79, 5),
(@p80, @p81, @p82, @p83, @p84, 6),
(@p85, @p86, @p87, @p88, @p89, 7),
(@p90, @p91, @p92, @p93, @p94, 8),
(@p95, @p96, @p97, @p98, @p99, 9),
(@p100, @p101, @p102, @p103, @p104, 10)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 16:06:55.149 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b944e1c-c5fa-4cc1-ae54-20d92033d78b
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b944e1c-c5fa-4cc1-ae54-20d92033d78b
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 16:06:55.153 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b944e1c-c5fa-4cc1-ae54-20d92033d78b
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 16:06:55.155 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b944e1c-c5fa-4cc1-ae54-20d92033d78b
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 291
2025-10-05 16:06:55.159 +07:00 [INF] BookStore application starting up...
2025-10-05 16:06:55.214 +07:00 [INF] Now listening on: http://localhost:5232
2025-10-05 16:06:55.215 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-05 16:06:55.215 +07:00 [INF] Hosting environment: Development
2025-10-05 16:06:55.215 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-10-05 16:06:55.385 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:06:55.392 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-05 16:06:55.449 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:06:55.457 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:06:55.581 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:06:55.618 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:06:55.627 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 16:06:55.650 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:06:55.663 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:06:55.674 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:06:55.684 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:06:55.692 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:06:55.718 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:06:55.729 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 16:06:55.748 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:06:55.761 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:06:55.783 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:06:55.813 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:06:55.932 +07:00 [INF] Executed ViewResult - view Index executed in 118.4123ms.
2025-10-05 16:06:55.937 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 478.8399ms
2025-10-05 16:06:55.938 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:06:55.939 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:06:55.943 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 4.3144ms
2025-10-05 16:06:55.944 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:06:55.944 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 560.4563ms
2025-10-05 16:06:55.951 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:06:55.951 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:06:55.955 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:06:55.955 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 4.0257ms
2025-10-05 16:06:55.956 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 4.1395ms
2025-10-05 16:06:55.956 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:06:55.956 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:06:55.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:06:55.957 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:06:55.957 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:06:55.959 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.6898ms
2025-10-05 16:06:55.959 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.8678ms
2025-10-05 16:06:55.959 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 3.8247ms
2025-10-05 16:06:55.959 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 2.0859ms
2025-10-05 16:06:55.959 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:06:55.959 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:06:55.959 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:06:55.959 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:06:55.960 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:06:55.963 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:06:55.963 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:06:55.964 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.0794ms
2025-10-05 16:06:55.964 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 3.5044ms
2025-10-05 16:06:55.964 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.7996ms
2025-10-05 16:06:55.964 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:06:55.964 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:12:09.120 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:12:09.122 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:12:09.122 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:12:09.129 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:12:09.135 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:12:09.138 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:12:09.140 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:12:09.142 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:12:09.144 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:12:09.145 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:12:09.146 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:12:09.147 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:12:09.150 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:12:09.151 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:12:09.152 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:12:09.157 +07:00 [INF] Executed ViewResult - view Index executed in 5.4817ms.
2025-10-05 16:12:09.158 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 34.6167ms
2025-10-05 16:12:09.158 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:12:09.158 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 37.9377ms
2025-10-05 16:12:09.176 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:12:09.177 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.9414ms
2025-10-05 16:12:09.177 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:12:09.179 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:12:09.179 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.6749ms
2025-10-05 16:12:09.180 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:12:09.181 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.0598ms
2025-10-05 16:12:09.181 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:12:09.188 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:12:09.189 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.0328ms
2025-10-05 16:12:09.189 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:12:09.189 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:12:09.189 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:12:09.190 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.0793ms
2025-10-05 16:12:09.190 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:12:09.190 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.8894ms
2025-10-05 16:12:09.191 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:12:09.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:12:09.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:12:09.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:12:09.218 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.024ms
2025-10-05 16:12:09.218 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.1367ms
2025-10-05 16:12:09.218 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.9522ms
2025-10-05 16:12:09.218 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:12:09.218 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:12:09.218 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:12:09.224 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:12:09.225 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.079ms
2025-10-05 16:12:09.225 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:15:37.171 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:15:37.173 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:15:37.173 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:15:37.191 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:15:37.220 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:15:37.222 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:15:37.225 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:15:37.227 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:15:37.228 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:15:37.229 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:15:37.231 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:15:37.234 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:15:37.237 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:15:37.240 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:15:37.241 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:15:37.246 +07:00 [INF] Executed ViewResult - view Index executed in 5.8163ms.
2025-10-05 16:15:37.247 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 73.799ms
2025-10-05 16:15:37.247 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:15:37.247 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 76.0992ms
2025-10-05 16:15:37.264 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:15:37.266 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.5164ms
2025-10-05 16:15:37.266 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:15:37.268 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:15:37.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.6681ms
2025-10-05 16:15:37.270 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:15:37.270 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.8023ms
2025-10-05 16:15:37.271 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:15:37.275 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:15:37.276 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:15:37.276 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:15:37.277 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.9134ms
2025-10-05 16:15:37.277 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.5872ms
2025-10-05 16:15:37.277 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.8783ms
2025-10-05 16:15:37.277 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:15:37.277 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:15:37.277 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:15:37.304 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:15:37.304 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:15:37.304 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:15:37.305 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.6078ms
2025-10-05 16:15:37.305 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.6582ms
2025-10-05 16:15:37.305 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.5501ms
2025-10-05 16:15:37.305 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:15:37.305 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:15:37.305 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:15:37.310 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:15:37.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.6385ms
2025-10-05 16:15:37.311 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:15:44.789 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:15:44.790 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:15:44.795 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:15:44.798 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 2.4103ms
2025-10-05 16:15:44.799 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:15:44.799 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Runtime.CompilerServices.HotReloadException: Attempted to invoke lambda or local function with an unsupported change made while the application is running: Attempted to invoke lambda or local function that has an unsupported change to captured variables made while the application is running
   at Program.<>c__DisplayClass0_0.<<Main>$>b__0(DbContextOptionsBuilder options)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass1_0`2.<AddDbContext>b__0(IServiceProvider _, DbContextOptionsBuilder b)
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method1344(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-05 16:15:44.817 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 500 null text/html; charset=utf-8 26.9992ms
2025-10-05 16:15:44.839 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:15:44.840 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2137ms
2025-10-05 16:15:48.357 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:15:48.358 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:15:48.358 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:15:48.359 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 0.4565ms
2025-10-05 16:15:48.359 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:15:48.359 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Runtime.CompilerServices.HotReloadException: Attempted to invoke lambda or local function with an unsupported change made while the application is running: Attempted to invoke lambda or local function that has an unsupported change to captured variables made while the application is running
   at Program.<>c__DisplayClass0_0.<<Main>$>b__0(DbContextOptionsBuilder options)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass1_0`2.<AddDbContext>b__0(IServiceProvider _, DbContextOptionsBuilder b)
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method1344(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-05 16:15:48.364 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 500 null text/html; charset=utf-8 6.4628ms
2025-10-05 16:15:48.393 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:15:48.393 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.5628ms
2025-10-05 16:15:48.402 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:15:48.403 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.8463ms
2025-10-05 16:15:48.403 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:15:56.272 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:15:56.272 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:15:56.273 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:15:56.273 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 0.2235ms
2025-10-05 16:15:56.273 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:15:56.273 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Runtime.CompilerServices.HotReloadException: Attempted to invoke lambda or local function with an unsupported change made while the application is running: Attempted to invoke lambda or local function that has an unsupported change to captured variables made while the application is running
   at Program.<>c__DisplayClass0_0.<<Main>$>b__0(DbContextOptionsBuilder options)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass1_0`2.<AddDbContext>b__0(IServiceProvider _, DbContextOptionsBuilder b)
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method1344(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-05 16:15:56.276 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 500 null text/html; charset=utf-8 4.0156ms
2025-10-05 16:15:56.309 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:15:56.309 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1958ms
2025-10-05 16:15:56.311 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:15:56.314 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 3.3529ms
2025-10-05 16:15:56.315 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:15:56.462 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:15:56.463 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:15:56.463 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:15:56.464 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 0.5673ms
2025-10-05 16:15:56.464 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:15:56.464 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Runtime.CompilerServices.HotReloadException: Attempted to invoke lambda or local function with an unsupported change made while the application is running: Attempted to invoke lambda or local function that has an unsupported change to captured variables made while the application is running
   at Program.<>c__DisplayClass0_0.<<Main>$>b__0(DbContextOptionsBuilder options)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass1_0`2.<AddDbContext>b__0(IServiceProvider _, DbContextOptionsBuilder b)
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method1344(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-05 16:15:56.469 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 500 null text/html; charset=utf-8 6.7549ms
2025-10-05 16:15:56.491 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:15:56.491 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:15:56.492 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.8067ms
2025-10-05 16:15:56.492 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.9722ms
2025-10-05 16:15:56.492 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:16:11.713 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:16:11.714 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:11.720 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:16:11.720 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 0.2317ms
2025-10-05 16:16:11.720 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:11.720 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Runtime.CompilerServices.HotReloadException: Attempted to invoke lambda or local function with an unsupported change made while the application is running: Attempted to invoke lambda or local function that has an unsupported change to captured variables made while the application is running
   at Program.<>c__DisplayClass0_0.<<Main>$>b__0(DbContextOptionsBuilder options)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass1_0`2.<AddDbContext>b__0(IServiceProvider _, DbContextOptionsBuilder b)
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method1352(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-05 16:16:11.725 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 500 null text/html; charset=utf-8 11.7736ms
2025-10-05 16:16:11.727 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:16:11.728 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:11.728 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:16:11.729 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 0.4532ms
2025-10-05 16:16:11.729 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:11.729 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Runtime.CompilerServices.HotReloadException: Attempted to invoke lambda or local function with an unsupported change made while the application is running: Attempted to invoke lambda or local function that has an unsupported change to captured variables made while the application is running
   at Program.<>c__DisplayClass0_0.<<Main>$>b__0(DbContextOptionsBuilder options)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass1_0`2.<AddDbContext>b__0(IServiceProvider _, DbContextOptionsBuilder b)
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method1352(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-05 16:16:11.735 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 500 null text/html; charset=utf-8 7.3845ms
2025-10-05 16:16:11.800 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:16:11.800 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:16:11.801 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2607ms
2025-10-05 16:16:11.801 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.9333ms
2025-10-05 16:16:11.802 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:16:11.804 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:16:11.804 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2752ms
2025-10-05 16:16:12.581 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:16:12.582 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:12.582 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:16:12.582 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 0.3476ms
2025-10-05 16:16:12.582 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:12.583 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Runtime.CompilerServices.HotReloadException: Attempted to invoke lambda or local function with an unsupported change made while the application is running: Attempted to invoke lambda or local function that has an unsupported change to captured variables made while the application is running
   at Program.<>c__DisplayClass0_0.<<Main>$>b__0(DbContextOptionsBuilder options)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass1_0`2.<AddDbContext>b__0(IServiceProvider _, DbContextOptionsBuilder b)
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method1352(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-05 16:16:12.587 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 500 null text/html; charset=utf-8 5.8372ms
2025-10-05 16:16:12.613 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:16:12.613 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2768ms
2025-10-05 16:16:12.614 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:16:12.616 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 2.2498ms
2025-10-05 16:16:12.616 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:16:12.758 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:16:12.758 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:12.758 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:16:12.759 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 0.4473ms
2025-10-05 16:16:12.759 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:12.759 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Runtime.CompilerServices.HotReloadException: Attempted to invoke lambda or local function with an unsupported change made while the application is running: Attempted to invoke lambda or local function that has an unsupported change to captured variables made while the application is running
   at Program.<>c__DisplayClass0_0.<<Main>$>b__0(DbContextOptionsBuilder options)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass1_0`2.<AddDbContext>b__0(IServiceProvider _, DbContextOptionsBuilder b)
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method1352(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-05 16:16:12.765 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 500 null text/html; charset=utf-8 7.3371ms
2025-10-05 16:16:12.792 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:16:12.792 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:16:12.793 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3825ms
2025-10-05 16:16:12.793 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.9794ms
2025-10-05 16:16:12.793 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:16:13.098 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:16:13.099 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:13.100 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:16:13.100 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 0.4259ms
2025-10-05 16:16:13.101 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:13.102 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Runtime.CompilerServices.HotReloadException: Attempted to invoke lambda or local function with an unsupported change made while the application is running: Attempted to invoke lambda or local function that has an unsupported change to captured variables made while the application is running
   at Program.<>c__DisplayClass0_0.<<Main>$>b__0(DbContextOptionsBuilder options)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass1_0`2.<AddDbContext>b__0(IServiceProvider _, DbContextOptionsBuilder b)
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.DbContextOptionsConfiguration`1.Configure(IServiceProvider serviceProvider, DbContextOptionsBuilder optionsBuilder)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method1352(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-05 16:16:13.108 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 500 null text/html; charset=utf-8 9.8857ms
2025-10-05 16:16:13.190 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:16:13.190 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2942ms
2025-10-05 16:16:13.221 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:16:13.222 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.0625ms
2025-10-05 16:16:13.222 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:16:35.343 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-05 16:16:35.999 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:16:36.008 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 16:16:36.029 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 16:16:36.075 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 16:16:36.085 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:16:36.087 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 16:16:36.091 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 16:16:36.098 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 16:16:36.102 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 16:16:36.269 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:16:36.300 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:16:36.302 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:16:36.303 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:16:36.315 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.350 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.350 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.363 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:16:36.373 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:16:36.375 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.376 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.378 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.379 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.380 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.381 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.382 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.383 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.388 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:16:36.395 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:16:36.405 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-05 16:16:36.415 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 16:16:36.425 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 16:16:36.614 +07:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Size = 450), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 450), @p50='?' (DbType = Int32), @p51='?' (DbType = Int32), @p52='?' (DbType = Int32), @p53='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p54='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (DbType = Int32), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = Int32), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p74='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Int32), @p78='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p79='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p80='?' (DbType = Int32), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32), @p87='?' (DbType = Int32), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p90='?' (DbType = Int32), @p91='?' (DbType = Int32), @p92='?' (DbType = Int32), @p93='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = Int32), @p98='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p99='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
MERGE [OrderItems] USING (
VALUES (@p50, @p51, @p52, @p53, @p54, 0),
(@p55, @p56, @p57, @p58, @p59, 1),
(@p60, @p61, @p62, @p63, @p64, 2),
(@p65, @p66, @p67, @p68, @p69, 3),
(@p70, @p71, @p72, @p73, @p74, 4),
(@p75, @p76, @p77, @p78, @p79, 5),
(@p80, @p81, @p82, @p83, @p84, 6),
(@p85, @p86, @p87, @p88, @p89, 7),
(@p90, @p91, @p92, @p93, @p94, 8),
(@p95, @p96, @p97, @p98, @p99, 9)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 16:16:36.626 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3c1de1df-6589-46e5-8130-f3ee0838ed9d
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3c1de1df-6589-46e5-8130-f3ee0838ed9d
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 16:16:36.633 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3c1de1df-6589-46e5-8130-f3ee0838ed9d
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 16:16:36.650 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3c1de1df-6589-46e5-8130-f3ee0838ed9d
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 183
2025-10-05 16:16:36.735 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:16:36.735 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 16:16:36.736 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 16:16:36.739 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 16:16:36.741 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:16:36.741 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 16:16:36.742 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 16:16:36.742 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 16:16:36.743 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 16:16:36.745 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:16:36.746 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:16:36.746 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:16:36.747 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:16:36.748 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.748 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.749 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.750 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:16:36.750 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:16:36.752 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.753 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.754 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.755 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.756 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.757 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.758 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.759 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:16:36.760 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:16:36.760 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:16:36.761 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 16:16:36.762 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 16:16:36.767 +07:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Size = 450), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 450), @p50='?' (DbType = Int32), @p51='?' (DbType = Int32), @p52='?' (DbType = Int32), @p53='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p54='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (DbType = Int32), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = Int32), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p74='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Int32), @p78='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p79='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p80='?' (DbType = Int32), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32), @p87='?' (DbType = Int32), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p90='?' (DbType = Int32), @p91='?' (DbType = Int32), @p92='?' (DbType = Int32), @p93='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = Int32), @p98='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p99='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
MERGE [OrderItems] USING (
VALUES (@p50, @p51, @p52, @p53, @p54, 0),
(@p55, @p56, @p57, @p58, @p59, 1),
(@p60, @p61, @p62, @p63, @p64, 2),
(@p65, @p66, @p67, @p68, @p69, 3),
(@p70, @p71, @p72, @p73, @p74, 4),
(@p75, @p76, @p77, @p78, @p79, 5),
(@p80, @p81, @p82, @p83, @p84, 6),
(@p85, @p86, @p87, @p88, @p89, 7),
(@p90, @p91, @p92, @p93, @p94, 8),
(@p95, @p96, @p97, @p98, @p99, 9)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 16:16:36.769 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3c1de1df-6589-46e5-8130-f3ee0838ed9d
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3c1de1df-6589-46e5-8130-f3ee0838ed9d
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 16:16:36.774 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3c1de1df-6589-46e5-8130-f3ee0838ed9d
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 16:16:36.776 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3c1de1df-6589-46e5-8130-f3ee0838ed9d
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 293
2025-10-05 16:16:36.780 +07:00 [INF] BookStore application starting up...
2025-10-05 16:16:36.834 +07:00 [INF] Now listening on: http://localhost:5232
2025-10-05 16:16:36.834 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-05 16:16:36.835 +07:00 [INF] Hosting environment: Development
2025-10-05 16:16:36.835 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-10-05 16:16:36.887 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:16:36.892 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-05 16:16:36.951 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:36.959 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:16:37.126 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:16:37.164 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:16:37.172 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 16:16:37.195 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:16:37.206 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:16:37.217 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:16:37.227 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:16:37.234 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:16:37.261 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:16:37.269 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 16:16:37.286 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:16:37.299 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:16:37.313 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:16:37.338 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:16:37.449 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:16:37.451 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:37.451 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:16:37.455 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:16:37.456 +07:00 [INF] Executed ViewResult - view Index executed in 119.3562ms.
2025-10-05 16:16:37.459 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:16:37.462 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 502.192ms
2025-10-05 16:16:37.463 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:37.463 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:16:37.466 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:16:37.467 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:16:37.470 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:16:37.471 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:16:37.472 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 585.9338ms
2025-10-05 16:16:37.473 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:16:37.474 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:16:37.478 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:16:37.481 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-05 16:16:37.481 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 8.3691ms
2025-10-05 16:16:37.482 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:16:37.483 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.4897ms
2025-10-05 16:16:37.483 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-05 16:16:37.483 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:16:37.485 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:16:37.487 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:16:37.492 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:16:37.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 1.5513ms
2025-10-05 16:16:37.496 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:16:37.497 +07:00 [INF] Executed ViewResult - view Index executed in 10.1265ms.
2025-10-05 16:16:37.497 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 45.6317ms
2025-10-05 16:16:37.497 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:37.498 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 49.202ms
2025-10-05 16:16:37.499 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:16:37.499 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 2.3337ms
2025-10-05 16:16:37.499 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:16:37.499 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.783ms
2025-10-05 16:16:37.500 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:16:37.504 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:16:37.505 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.8735ms
2025-10-05 16:16:37.506 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:16:37.520 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:16:37.521 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.8844ms
2025-10-05 16:16:37.521 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:16:37.530 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:16:37.531 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.7849ms
2025-10-05 16:16:37.531 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:16:37.531 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:16:37.533 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.4837ms
2025-10-05 16:16:37.533 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.4836ms
2025-10-05 16:16:37.533 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:16:37.533 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:16:37.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:16:37.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:16:37.536 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:16:37.537 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.9285ms
2025-10-05 16:16:37.537 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.9311ms
2025-10-05 16:16:37.537 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.9286ms
2025-10-05 16:16:37.538 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:16:37.538 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:16:37.538 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:16:37.541 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:16:37.541 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:16:37.541 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:16:37.543 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.17ms
2025-10-05 16:16:37.543 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.2258ms
2025-10-05 16:16:37.543 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:16:37.543 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.2297ms
2025-10-05 16:16:37.543 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:16:37.543 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:16:37.599 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:16:37.600 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.1337ms
2025-10-05 16:16:37.600 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:16:37.621 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:16:37.622 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.0802ms
2025-10-05 16:16:37.622 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:16:37.636 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:16:37.636 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.7935ms
2025-10-05 16:16:37.637 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:16:37.639 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:16:37.640 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.9893ms
2025-10-05 16:16:37.640 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:16:37.643 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:16:37.644 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.316ms
2025-10-05 16:16:37.644 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:16:50.814 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:16:50.815 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:50.819 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:16:50.838 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:16:50.845 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:16:50.854 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:16:50.858 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:16:50.860 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:16:50.863 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:16:50.864 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:16:50.866 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:16:50.868 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:16:50.871 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:16:50.874 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:16:50.876 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:16:50.894 +07:00 [INF] Executed ViewResult - view Index executed in 19.7213ms.
2025-10-05 16:16:50.894 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 75.0804ms
2025-10-05 16:16:50.895 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:50.895 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 81.1235ms
2025-10-05 16:16:50.919 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:16:50.921 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.5634ms
2025-10-05 16:16:50.921 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:16:50.923 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:16:50.923 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3853ms
2025-10-05 16:16:50.924 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:16:50.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 2.2992ms
2025-10-05 16:16:50.926 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:16:50.933 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:16:50.935 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:16:50.935 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.9319ms
2025-10-05 16:16:50.935 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:16:50.936 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:16:50.936 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 1.1839ms
2025-10-05 16:16:50.936 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.1846ms
2025-10-05 16:16:50.937 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:16:50.937 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:16:50.975 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:16:50.975 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:16:50.975 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:16:50.976 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.0289ms
2025-10-05 16:16:50.976 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.9328ms
2025-10-05 16:16:50.976 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.8565ms
2025-10-05 16:16:50.976 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:16:50.976 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:16:50.976 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:16:50.981 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:16:50.982 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.645ms
2025-10-05 16:16:50.982 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:16:55.126 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:16:55.128 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:55.129 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:16:55.137 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:16:55.146 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:16:55.155 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:16:55.161 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:16:55.166 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:16:55.170 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:16:55.172 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:16:55.176 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:16:55.179 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:16:55.185 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:16:55.190 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:16:55.192 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:16:55.200 +07:00 [INF] Executed ViewResult - view Index executed in 8.6767ms.
2025-10-05 16:16:55.201 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 71.6526ms
2025-10-05 16:16:55.201 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:55.202 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 75.2469ms
2025-10-05 16:16:55.241 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:16:55.242 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.2488ms
2025-10-05 16:16:55.242 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:16:55.247 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:16:55.247 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:16:55.248 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.836ms
2025-10-05 16:16:55.249 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.5585ms
2025-10-05 16:16:55.249 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:16:55.260 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:16:55.260 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:16:55.262 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.4047ms
2025-10-05 16:16:55.262 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 1.405ms
2025-10-05 16:16:55.262 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:16:55.262 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:16:55.262 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:16:55.264 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.8626ms
2025-10-05 16:16:55.264 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:16:55.301 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:16:55.301 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:16:55.301 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:16:55.304 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 2.402ms
2025-10-05 16:16:55.304 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 2.4022ms
2025-10-05 16:16:55.304 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 2.3981ms
2025-10-05 16:16:55.304 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:16:55.304 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:16:55.304 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:16:55.310 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:16:55.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.7085ms
2025-10-05 16:16:55.311 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:16:58.786 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:16:58.786 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:58.787 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:16:58.789 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:16:58.791 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:16:58.794 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:16:58.796 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:16:58.797 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:16:58.798 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:16:58.799 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:16:58.800 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:16:58.800 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:16:58.801 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:16:58.803 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:16:58.805 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:16:58.807 +07:00 [INF] Executed ViewResult - view Index executed in 2.4229ms.
2025-10-05 16:16:58.807 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 20.6588ms
2025-10-05 16:16:58.807 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:16:58.808 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 21.4292ms
2025-10-05 16:16:58.827 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:16:58.828 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.159ms
2025-10-05 16:16:58.828 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:16:58.829 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:16:58.829 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.216ms
2025-10-05 16:16:58.830 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:16:58.831 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.8249ms
2025-10-05 16:16:58.831 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:16:58.831 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:16:58.831 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:16:58.831 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:16:58.831 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.4796ms
2025-10-05 16:16:58.831 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.5523ms
2025-10-05 16:16:58.832 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:16:58.832 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:16:58.832 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.7156ms
2025-10-05 16:16:58.832 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:16:58.833 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:16:58.834 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.1933ms
2025-10-05 16:16:58.835 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:16:58.837 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:16:58.848 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:16:58.849 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 10.6898ms
2025-10-05 16:16:58.849 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:16:58.849 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.4009ms
2025-10-05 16:16:58.850 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:16:58.850 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.5658ms
2025-10-05 16:16:58.851 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:16:58.851 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:00.001 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:00.002 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:00.002 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:00.005 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:00.010 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:00.013 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:00.014 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:00.015 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:00.016 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:00.018 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:00.020 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:00.020 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:00.021 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:00.022 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:00.022 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:00.026 +07:00 [INF] Executed ViewResult - view Index executed in 4.1442ms.
2025-10-05 16:17:00.027 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 24.5287ms
2025-10-05 16:17:00.027 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:00.027 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 25.7952ms
2025-10-05 16:17:00.044 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:00.045 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.9693ms
2025-10-05 16:17:00.045 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:00.046 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:00.047 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3532ms
2025-10-05 16:17:00.047 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:00.047 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.4153ms
2025-10-05 16:17:00.047 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:00.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:00.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:00.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:00.048 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.3356ms
2025-10-05 16:17:00.048 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.3024ms
2025-10-05 16:17:00.048 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:00.048 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.2901ms
2025-10-05 16:17:00.048 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:00.048 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:00.049 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:00.049 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.4311ms
2025-10-05 16:17:00.049 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:00.050 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:00.051 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:00.051 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:00.051 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.1011ms
2025-10-05 16:17:00.052 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.3782ms
2025-10-05 16:17:00.052 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:00.052 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:00.052 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.3062ms
2025-10-05 16:17:00.052 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:00.532 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:00.532 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:00.532 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:00.534 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:00.537 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:00.539 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:00.540 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:00.541 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:00.542 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:00.543 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:00.545 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:00.547 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:00.548 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:00.549 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:00.549 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:00.553 +07:00 [INF] Executed ViewResult - view Index executed in 3.6295ms.
2025-10-05 16:17:00.553 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 20.3102ms
2025-10-05 16:17:00.553 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:00.553 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 21.4158ms
2025-10-05 16:17:00.572 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:00.573 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.6758ms
2025-10-05 16:17:00.573 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:00.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:00.575 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1256ms
2025-10-05 16:17:00.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:00.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:00.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:00.575 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.1977ms
2025-10-05 16:17:00.575 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.2897ms
2025-10-05 16:17:00.575 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:00.575 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:00.576 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.2078ms
2025-10-05 16:17:00.576 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:00.576 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:00.576 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:00.576 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.3384ms
2025-10-05 16:17:00.576 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.3392ms
2025-10-05 16:17:00.576 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:00.576 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:00.579 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:00.579 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:00.579 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:00.579 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.5419ms
2025-10-05 16:17:00.579 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.4248ms
2025-10-05 16:17:00.579 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:00.579 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.5938ms
2025-10-05 16:17:00.579 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:00.579 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:00.697 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:00.698 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:00.698 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:00.700 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:00.701 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:00.704 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:00.706 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:00.707 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:00.708 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:00.708 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:00.709 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:00.710 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:00.712 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:00.713 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:00.714 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:00.715 +07:00 [INF] Executed ViewResult - view Index executed in 1.5034ms.
2025-10-05 16:17:00.715 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 17.378ms
2025-10-05 16:17:00.715 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:00.715 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 18.1663ms
2025-10-05 16:17:00.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:00.735 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.3193ms
2025-10-05 16:17:00.735 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:00.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:00.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2497ms
2025-10-05 16:17:00.738 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:00.738 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:00.738 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:00.738 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:00.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.3207ms
2025-10-05 16:17:00.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.4544ms
2025-10-05 16:17:00.738 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:00.738 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:00.739 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.236ms
2025-10-05 16:17:00.739 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:00.739 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.4005ms
2025-10-05 16:17:00.739 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:00.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:00.739 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.3822ms
2025-10-05 16:17:00.739 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:00.742 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:00.742 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:00.742 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:00.742 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.3847ms
2025-10-05 16:17:00.742 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.2676ms
2025-10-05 16:17:00.742 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:00.742 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.2253ms
2025-10-05 16:17:00.742 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:00.742 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:00.856 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:00.856 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:00.857 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:00.858 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:00.861 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:00.864 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:00.866 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:00.867 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:00.867 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:00.868 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:00.868 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:00.870 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:00.872 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:00.873 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:00.873 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:00.875 +07:00 [INF] Executed ViewResult - view Index executed in 1.4472ms.
2025-10-05 16:17:00.875 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 18.1294ms
2025-10-05 16:17:00.875 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:00.875 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 18.6952ms
2025-10-05 16:17:00.896 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:00.896 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.3747ms
2025-10-05 16:17:00.896 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:00.899 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:00.899 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2589ms
2025-10-05 16:17:00.900 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:00.900 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:00.900 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:00.900 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.4646ms
2025-10-05 16:17:00.900 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:00.900 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.44ms
2025-10-05 16:17:00.900 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.4695ms
2025-10-05 16:17:00.900 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:00.900 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:00.900 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:00.900 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:00.901 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.2182ms
2025-10-05 16:17:00.901 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.329ms
2025-10-05 16:17:00.901 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:00.901 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:00.903 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:00.903 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:00.903 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:00.904 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.4443ms
2025-10-05 16:17:00.904 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:00.904 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.605ms
2025-10-05 16:17:00.904 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.5933ms
2025-10-05 16:17:00.904 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:00.904 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:01.025 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:01.025 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:01.025 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:01.027 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:01.029 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:01.032 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:01.034 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:01.034 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:01.035 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:01.036 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:01.037 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:01.039 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:01.040 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:01.041 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:01.041 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:01.045 +07:00 [INF] Executed ViewResult - view Index executed in 3.7137ms.
2025-10-05 16:17:01.045 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 19.9046ms
2025-10-05 16:17:01.045 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:01.046 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 20.5507ms
2025-10-05 16:17:01.066 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:01.067 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.5347ms
2025-10-05 16:17:01.067 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:01.069 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:01.069 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:01.069 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1579ms
2025-10-05 16:17:01.069 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:01.069 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:01.069 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:01.070 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:01.070 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.2373ms
2025-10-05 16:17:01.070 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.5298ms
2025-10-05 16:17:01.070 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.3728ms
2025-10-05 16:17:01.070 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.4585ms
2025-10-05 16:17:01.070 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:01.070 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:01.070 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:01.070 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.4289ms
2025-10-05 16:17:01.070 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:01.070 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:01.073 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:01.074 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:01.074 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.5714ms
2025-10-05 16:17:01.074 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:01.074 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:01.074 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.6903ms
2025-10-05 16:17:01.074 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:01.074 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.6038ms
2025-10-05 16:17:01.074 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:01.209 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:01.210 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:01.210 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:01.211 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:01.213 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:01.216 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:01.218 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:01.220 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:01.221 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:01.222 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:01.223 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:01.226 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:01.227 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:01.228 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:01.229 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:01.230 +07:00 [INF] Executed ViewResult - view Index executed in 1.7987ms.
2025-10-05 16:17:01.230 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 20.6805ms
2025-10-05 16:17:01.231 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:01.231 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 21.3679ms
2025-10-05 16:17:01.249 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:01.250 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.5041ms
2025-10-05 16:17:01.250 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:01.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:01.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:01.252 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2918ms
2025-10-05 16:17:01.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:01.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:01.253 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:01.253 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.6287ms
2025-10-05 16:17:01.253 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.2905ms
2025-10-05 16:17:01.253 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:01.253 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:01.253 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.3926ms
2025-10-05 16:17:01.253 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.1641ms
2025-10-05 16:17:01.253 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:01.253 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:01.253 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:01.253 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.2763ms
2025-10-05 16:17:01.254 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:01.256 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:01.256 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:01.257 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.5889ms
2025-10-05 16:17:01.257 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:01.257 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:01.257 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.3788ms
2025-10-05 16:17:01.257 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:01.257 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.2959ms
2025-10-05 16:17:01.257 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:01.400 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:01.400 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:01.400 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:01.402 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:01.404 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:01.406 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:01.408 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:01.408 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:01.409 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:01.409 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:01.410 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:01.411 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:01.413 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:01.414 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:01.414 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:01.416 +07:00 [INF] Executed ViewResult - view Index executed in 2.0062ms.
2025-10-05 16:17:01.416 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 15.9597ms
2025-10-05 16:17:01.416 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:01.416 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 16.7652ms
2025-10-05 16:17:01.435 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:01.435 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.5548ms
2025-10-05 16:17:01.435 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:01.437 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:01.437 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:01.437 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2006ms
2025-10-05 16:17:01.437 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:01.437 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:01.438 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:01.438 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.4652ms
2025-10-05 16:17:01.438 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:01.438 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.6731ms
2025-10-05 16:17:01.438 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.2157ms
2025-10-05 16:17:01.438 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:01.438 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:01.438 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:01.438 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.5483ms
2025-10-05 16:17:01.438 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.7057ms
2025-10-05 16:17:01.438 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:01.438 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:01.441 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:01.441 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:01.441 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:01.441 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.4945ms
2025-10-05 16:17:01.441 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.4763ms
2025-10-05 16:17:01.442 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:01.442 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:01.441 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.4144ms
2025-10-05 16:17:01.442 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:01.610 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:01.610 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:01.610 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:01.612 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:01.614 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:01.617 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:01.620 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:01.621 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:01.622 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:01.622 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:01.623 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:01.624 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:01.625 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:01.628 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:01.628 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:01.631 +07:00 [INF] Executed ViewResult - view Index executed in 2.4205ms.
2025-10-05 16:17:01.631 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 20.8182ms
2025-10-05 16:17:01.631 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:01.631 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 21.7445ms
2025-10-05 16:17:01.650 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:01.650 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.3158ms
2025-10-05 16:17:01.650 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:01.652 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:01.652 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1874ms
2025-10-05 16:17:01.652 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:01.652 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:01.653 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.5354ms
2025-10-05 16:17:01.653 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.7806ms
2025-10-05 16:17:01.653 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:01.653 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:01.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:01.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:01.654 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.43ms
2025-10-05 16:17:01.654 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:01.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:01.654 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.3233ms
2025-10-05 16:17:01.654 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:01.654 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.1548ms
2025-10-05 16:17:01.654 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:01.657 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:01.657 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:01.657 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:01.657 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.3737ms
2025-10-05 16:17:01.657 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.2773ms
2025-10-05 16:17:01.657 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:01.657 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.3163ms
2025-10-05 16:17:01.657 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:01.657 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:01.790 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:01.790 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:01.791 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:01.793 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:01.794 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:01.795 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:01.797 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:01.797 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:01.798 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:01.800 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:01.803 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:01.804 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:01.805 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:01.806 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:01.807 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:01.810 +07:00 [INF] Executed ViewResult - view Index executed in 2.3735ms.
2025-10-05 16:17:01.810 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 19.3251ms
2025-10-05 16:17:01.810 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:01.810 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 19.917ms
2025-10-05 16:17:01.826 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:01.827 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.5964ms
2025-10-05 16:17:01.827 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:01.829 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:01.829 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:01.829 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2128ms
2025-10-05 16:17:01.829 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:01.830 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:01.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.5633ms
2025-10-05 16:17:01.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.3315ms
2025-10-05 16:17:01.830 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:01.830 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:01.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.1861ms
2025-10-05 16:17:01.830 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:01.830 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:01.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.1372ms
2025-10-05 16:17:01.830 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:01.830 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:01.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.1686ms
2025-10-05 16:17:01.830 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:01.832 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:01.832 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:01.832 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:01.832 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.2282ms
2025-10-05 16:17:01.832 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.127ms
2025-10-05 16:17:01.832 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:01.832 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:01.832 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.1773ms
2025-10-05 16:17:01.832 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:02.004 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:02.004 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:02.005 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:02.006 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:02.010 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:02.012 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:02.016 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:02.017 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:02.018 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:02.019 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:02.019 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:02.020 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:02.023 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:02.025 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:02.025 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:02.029 +07:00 [INF] Executed ViewResult - view Index executed in 3.6106ms.
2025-10-05 16:17:02.029 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 24.5686ms
2025-10-05 16:17:02.029 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:02.030 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 25.5089ms
2025-10-05 16:17:02.052 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:02.053 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.4327ms
2025-10-05 16:17:02.053 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:02.058 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:02.058 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2442ms
2025-10-05 16:17:02.058 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:02.058 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:02.058 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:02.059 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.7048ms
2025-10-05 16:17:02.059 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.4802ms
2025-10-05 16:17:02.059 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.3484ms
2025-10-05 16:17:02.059 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:02.059 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:02.059 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:02.059 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:02.059 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:02.059 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.2268ms
2025-10-05 16:17:02.059 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:02.059 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.1816ms
2025-10-05 16:17:02.059 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:02.063 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:02.063 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:02.063 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:02.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.0264ms
2025-10-05 16:17:02.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.6871ms
2025-10-05 16:17:02.064 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:02.064 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:02.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.0393ms
2025-10-05 16:17:02.064 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:02.224 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:02.224 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:02.224 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:02.226 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:02.227 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:02.229 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:02.231 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:02.232 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:02.233 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:02.233 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:02.234 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:02.235 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:02.237 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:02.238 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:02.239 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:02.241 +07:00 [INF] Executed ViewResult - view Index executed in 2.4883ms.
2025-10-05 16:17:02.241 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 17.3639ms
2025-10-05 16:17:02.241 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:02.242 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 17.8839ms
2025-10-05 16:17:02.262 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:02.262 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.3291ms
2025-10-05 16:17:02.262 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:02.265 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:02.265 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:02.265 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2465ms
2025-10-05 16:17:02.265 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:02.265 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.2276ms
2025-10-05 16:17:02.265 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:02.265 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.5047ms
2025-10-05 16:17:02.265 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:02.265 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:02.266 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.3633ms
2025-10-05 16:17:02.266 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:02.266 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:02.266 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:02.267 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.3848ms
2025-10-05 16:17:02.267 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.3869ms
2025-10-05 16:17:02.267 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:02.267 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:02.269 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:02.269 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:02.269 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:02.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.3089ms
2025-10-05 16:17:02.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.2895ms
2025-10-05 16:17:02.269 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:02.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.3804ms
2025-10-05 16:17:02.269 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:02.269 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:06.741 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:06.741 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:06.742 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:06.744 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:06.747 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:06.749 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:06.750 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:06.751 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:06.752 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:06.753 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:06.755 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:06.756 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:06.757 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:06.758 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:06.758 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:06.761 +07:00 [INF] Executed ViewResult - view Index executed in 2.8276ms.
2025-10-05 16:17:06.761 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 19.3219ms
2025-10-05 16:17:06.761 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:06.762 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 20.5715ms
2025-10-05 16:17:06.804 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:06.804 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2289ms
2025-10-05 16:17:08.574 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:08.575 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:08.575 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:08.577 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:08.578 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:08.579 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:08.581 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:08.581 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:08.582 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:08.582 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:08.584 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:08.585 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:08.586 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:08.587 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:08.587 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:08.589 +07:00 [INF] Executed ViewResult - view Index executed in 1.7886ms.
2025-10-05 16:17:08.589 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 14.1829ms
2025-10-05 16:17:08.589 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:08.589 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 14.7978ms
2025-10-05 16:17:08.607 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:08.608 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.8134ms
2025-10-05 16:17:08.608 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:08.609 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:08.609 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1506ms
2025-10-05 16:17:08.610 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:08.610 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.2524ms
2025-10-05 16:17:08.610 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:08.610 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:08.610 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:08.610 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:08.610 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.2359ms
2025-10-05 16:17:08.610 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.1773ms
2025-10-05 16:17:08.610 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.1311ms
2025-10-05 16:17:08.610 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:08.610 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:08.610 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:08.612 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:08.612 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.4915ms
2025-10-05 16:17:08.612 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:08.614 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:08.615 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.3975ms
2025-10-05 16:17:08.615 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:08.615 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:08.615 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:08.615 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.2072ms
2025-10-05 16:17:08.615 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:08.615 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.2069ms
2025-10-05 16:17:08.615 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:08.742 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:08.742 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:08.742 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:08.744 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:08.745 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:08.748 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:08.751 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:08.753 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:08.753 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:08.754 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:08.754 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:08.755 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:08.755 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:08.756 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:08.756 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:08.759 +07:00 [INF] Executed ViewResult - view Index executed in 2.4201ms.
2025-10-05 16:17:08.759 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 16.2035ms
2025-10-05 16:17:08.759 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:08.759 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 16.9268ms
2025-10-05 16:17:08.774 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:08.775 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.3223ms
2025-10-05 16:17:08.775 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:08.776 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:08.777 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:08.777 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1424ms
2025-10-05 16:17:08.777 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:08.777 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:08.777 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:08.777 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.2937ms
2025-10-05 16:17:08.777 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.1577ms
2025-10-05 16:17:08.777 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:08.777 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.1478ms
2025-10-05 16:17:08.777 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:08.777 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:08.777 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.286ms
2025-10-05 16:17:08.777 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:08.777 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:08.778 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.3295ms
2025-10-05 16:17:08.778 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:08.780 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:08.780 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:08.780 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:08.781 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.3119ms
2025-10-05 16:17:08.781 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.2075ms
2025-10-05 16:17:08.781 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:08.781 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.3901ms
2025-10-05 16:17:08.781 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:08.781 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:08.914 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:08.914 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:08.914 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:08.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:08.918 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:08.920 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:08.922 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:08.923 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:08.924 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:08.927 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:08.927 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:08.928 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:08.929 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:08.929 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:08.930 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:08.934 +07:00 [INF] Executed ViewResult - view Index executed in 3.9724ms.
2025-10-05 16:17:08.934 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 19.9574ms
2025-10-05 16:17:08.934 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:08.935 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 20.7309ms
2025-10-05 16:17:08.955 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:08.955 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.4165ms
2025-10-05 16:17:08.955 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:08.957 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:08.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1241ms
2025-10-05 16:17:08.957 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:08.957 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:08.957 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:08.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.2187ms
2025-10-05 16:17:08.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.3083ms
2025-10-05 16:17:08.957 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:08.957 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:08.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.3203ms
2025-10-05 16:17:08.958 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:08.958 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:08.959 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.7567ms
2025-10-05 16:17:08.959 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:08.959 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:08.959 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.3092ms
2025-10-05 16:17:08.959 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:08.962 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:08.962 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:08.962 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:08.962 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.5372ms
2025-10-05 16:17:08.962 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.5525ms
2025-10-05 16:17:08.962 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:08.962 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.4755ms
2025-10-05 16:17:08.962 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:08.962 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:34.499 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:34.499 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:34.504 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:34.508 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:34.512 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:34.516 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:34.518 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:34.519 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:34.519 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:34.520 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:34.520 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:34.521 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:34.524 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:34.525 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:34.527 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:34.538 +07:00 [INF] Executed ViewResult - view Index executed in 12.852ms.
2025-10-05 16:17:34.538 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 34.2527ms
2025-10-05 16:17:34.538 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:34.539 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 39.6355ms
2025-10-05 16:17:34.559 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:34.560 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.0732ms
2025-10-05 16:17:34.560 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:34.562 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:34.562 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:34.562 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1758ms
2025-10-05 16:17:34.564 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 2.7495ms
2025-10-05 16:17:34.565 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:34.565 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:34.565 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.4746ms
2025-10-05 16:17:34.565 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:34.568 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:34.569 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.4789ms
2025-10-05 16:17:34.569 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:34.593 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:34.593 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:34.593 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:34.594 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.4239ms
2025-10-05 16:17:34.594 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.2119ms
2025-10-05 16:17:34.594 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:34.594 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:34.594 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.2394ms
2025-10-05 16:17:34.594 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:34.602 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:34.602 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:34.602 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.2114ms
2025-10-05 16:17:34.602 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.2427ms
2025-10-05 16:17:34.602 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:34.602 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:51.915 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:51.916 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:51.916 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:51.918 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:51.920 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:51.922 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:51.924 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:51.925 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:51.927 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:51.928 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:51.929 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:51.929 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:51.931 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:51.931 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:51.932 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:51.933 +07:00 [INF] Executed ViewResult - view Index executed in 1.8538ms.
2025-10-05 16:17:51.934 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 17.6304ms
2025-10-05 16:17:51.934 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:51.934 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 18.2262ms
2025-10-05 16:17:51.950 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:51.951 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.4512ms
2025-10-05 16:17:51.951 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:51.953 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:51.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1273ms
2025-10-05 16:17:51.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:51.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:51.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:51.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.1824ms
2025-10-05 16:17:51.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.2529ms
2025-10-05 16:17:51.954 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:51.954 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:51.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:51.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:51.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.5518ms
2025-10-05 16:17:51.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.1987ms
2025-10-05 16:17:51.954 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:51.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.1496ms
2025-10-05 16:17:51.954 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:51.954 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:51.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:51.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:51.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:51.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.2146ms
2025-10-05 16:17:51.957 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:51.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.2664ms
2025-10-05 16:17:51.957 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:51.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.2954ms
2025-10-05 16:17:51.957 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:52.583 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:52.583 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:52.584 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:52.585 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:52.586 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:52.589 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:52.591 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:52.592 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:52.593 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:52.595 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:52.597 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:52.598 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:52.599 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:52.600 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:52.600 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:52.603 +07:00 [INF] Executed ViewResult - view Index executed in 2.7298ms.
2025-10-05 16:17:52.603 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 19.0567ms
2025-10-05 16:17:52.603 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:52.603 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 19.6862ms
2025-10-05 16:17:52.618 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:52.618 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.319ms
2025-10-05 16:17:52.619 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:52.621 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:52.621 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.161ms
2025-10-05 16:17:52.621 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:52.621 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:52.622 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:52.622 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.6832ms
2025-10-05 16:17:52.622 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.3577ms
2025-10-05 16:17:52.622 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:52.622 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:52.622 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.1687ms
2025-10-05 16:17:52.622 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:52.622 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:52.622 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:52.622 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.2558ms
2025-10-05 16:17:52.623 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:52.623 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.1673ms
2025-10-05 16:17:52.623 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:52.625 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:52.625 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:52.625 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:52.626 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.6066ms
2025-10-05 16:17:52.626 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.646ms
2025-10-05 16:17:52.626 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:52.626 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.674ms
2025-10-05 16:17:52.626 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:52.626 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:52.785 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:52.785 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:52.785 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:52.787 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:52.789 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:52.792 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:52.794 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:52.797 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:52.798 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:52.799 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:52.800 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:52.800 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:52.801 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:52.802 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:52.802 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:52.805 +07:00 [INF] Executed ViewResult - view Index executed in 2.1666ms.
2025-10-05 16:17:52.805 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 19.721ms
2025-10-05 16:17:52.805 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:52.805 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 20.2808ms
2025-10-05 16:17:52.821 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:52.821 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.2865ms
2025-10-05 16:17:52.821 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:52.823 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:52.824 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3802ms
2025-10-05 16:17:52.824 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:52.824 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:52.824 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:52.824 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.3318ms
2025-10-05 16:17:52.824 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.4325ms
2025-10-05 16:17:52.824 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:52.824 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:52.824 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.3061ms
2025-10-05 16:17:52.824 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:52.824 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:52.825 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:52.825 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.1189ms
2025-10-05 16:17:52.825 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:52.825 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.3246ms
2025-10-05 16:17:52.825 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:52.827 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:52.827 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:52.827 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:52.828 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.3127ms
2025-10-05 16:17:52.828 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.3938ms
2025-10-05 16:17:52.828 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:52.828 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:52.828 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.2538ms
2025-10-05 16:17:52.828 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:52.970 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:52.970 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:52.970 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:52.972 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:52.973 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:52.976 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:52.978 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:52.980 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:52.981 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:52.981 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:52.983 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:52.984 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:52.985 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:52.985 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:52.986 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:52.988 +07:00 [INF] Executed ViewResult - view Index executed in 2.0292ms.
2025-10-05 16:17:52.988 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 17.6738ms
2025-10-05 16:17:52.988 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:52.988 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 18.2061ms
2025-10-05 16:17:53.003 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:53.004 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.6352ms
2025-10-05 16:17:53.004 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:53.006 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:53.007 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:53.007 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1894ms
2025-10-05 16:17:53.007 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:53.007 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:53.007 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.2223ms
2025-10-05 16:17:53.007 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.3092ms
2025-10-05 16:17:53.007 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:53.007 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:53.007 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:53.007 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.254ms
2025-10-05 16:17:53.007 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:53.007 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:53.007 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.5936ms
2025-10-05 16:17:53.007 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:53.007 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.129ms
2025-10-05 16:17:53.007 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:53.009 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:53.009 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:53.009 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:53.009 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.2205ms
2025-10-05 16:17:53.009 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.2278ms
2025-10-05 16:17:53.009 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.1724ms
2025-10-05 16:17:53.009 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:53.009 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:53.009 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:53.128 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:53.129 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:53.129 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:53.131 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:53.132 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:53.134 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:53.138 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:53.138 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:53.139 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:53.139 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:53.140 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:53.140 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:53.141 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:53.141 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:53.141 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:53.144 +07:00 [INF] Executed ViewResult - view Index executed in 3.1799ms.
2025-10-05 16:17:53.145 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 15.7393ms
2025-10-05 16:17:53.145 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:53.145 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 16.9282ms
2025-10-05 16:17:53.162 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:53.163 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.6477ms
2025-10-05 16:17:53.163 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:53.166 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:53.167 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2189ms
2025-10-05 16:17:53.167 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:53.167 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:53.167 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:53.167 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:53.167 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.182ms
2025-10-05 16:17:53.167 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.2666ms
2025-10-05 16:17:53.167 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:53.167 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.2931ms
2025-10-05 16:17:53.167 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:53.167 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:53.167 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.3414ms
2025-10-05 16:17:53.167 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:53.167 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:53.168 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.1354ms
2025-10-05 16:17:53.168 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:53.169 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:53.170 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:53.170 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:53.170 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.5889ms
2025-10-05 16:17:53.170 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:17:53.170 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.2953ms
2025-10-05 16:17:53.170 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.2998ms
2025-10-05 16:17:53.170 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:53.170 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:53.286 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:17:53.286 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:53.286 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:17:53.288 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:53.289 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:17:53.291 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:17:53.293 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:17:53.295 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:17:53.297 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:17:53.298 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:17:53.299 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:17:53.299 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:17:53.300 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:17:53.301 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:17:53.301 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:17:53.303 +07:00 [INF] Executed ViewResult - view Index executed in 1.7876ms.
2025-10-05 16:17:53.303 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 17.0361ms
2025-10-05 16:17:53.303 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:17:53.304 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 17.8445ms
2025-10-05 16:17:53.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:17:53.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.4574ms
2025-10-05 16:17:53.323 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:17:53.326 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:17:53.326 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1236ms
2025-10-05 16:17:53.326 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:17:53.326 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.2379ms
2025-10-05 16:17:53.326 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:17:53.326 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:17:53.327 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.1897ms
2025-10-05 16:17:53.327 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:17:53.327 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:17:53.327 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:17:53.327 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:17:53.327 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.1592ms
2025-10-05 16:17:53.327 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.2036ms
2025-10-05 16:17:53.327 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:17:53.327 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:17:53.327 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.1724ms
2025-10-05 16:17:53.327 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:17:53.330 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:17:53.330 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:17:53.330 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:17:53.331 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.3094ms
2025-10-05 16:17:53.331 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.4274ms
2025-10-05 16:17:53.331 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:17:53.331 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:17:53.331 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.5124ms
2025-10-05 16:17:53.331 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:18:04.945 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-05 16:18:05.619 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:18:05.638 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 16:18:05.664 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 16:18:05.714 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 16:18:05.729 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:18:05.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 16:18:05.736 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 16:18:05.745 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 16:18:05.750 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 16:18:05.935 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:18:05.969 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:18:05.971 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:18:05.973 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:18:05.987 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.020 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.022 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.040 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:18:06.050 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:18:06.053 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.054 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.057 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.058 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.060 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.062 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.064 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.065 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.073 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:18:06.081 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:18:06.095 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-05 16:18:06.107 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 16:18:06.115 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 16:18:06.346 +07:00 [ERR] Failed executing DbCommand (15ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Size = 450), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 450), @p50='?' (DbType = Int32), @p51='?' (DbType = DateTime2), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = Int32), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Size = 450), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = Int32), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p74='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Int32), @p78='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p79='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p80='?' (DbType = Int32), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32), @p87='?' (DbType = Int32), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p90='?' (DbType = Int32), @p91='?' (DbType = Int32), @p92='?' (DbType = Int32), @p93='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = Int32), @p98='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p99='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p100='?' (DbType = Int32), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p105='?' (DbType = Int32), @p106='?' (DbType = Int32), @p107='?' (DbType = Int32), @p108='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p109='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p110='?' (DbType = Int32), @p111='?' (DbType = Int32), @p112='?' (DbType = Int32), @p113='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p114='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p115='?' (DbType = Int32), @p116='?' (DbType = Int32), @p117='?' (DbType = Int32), @p118='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p119='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49),
(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59);
MERGE [OrderItems] USING (
VALUES (@p60, @p61, @p62, @p63, @p64, 0),
(@p65, @p66, @p67, @p68, @p69, 1),
(@p70, @p71, @p72, @p73, @p74, 2),
(@p75, @p76, @p77, @p78, @p79, 3),
(@p80, @p81, @p82, @p83, @p84, 4),
(@p85, @p86, @p87, @p88, @p89, 5),
(@p90, @p91, @p92, @p93, @p94, 6),
(@p95, @p96, @p97, @p98, @p99, 7),
(@p100, @p101, @p102, @p103, @p104, 8),
(@p105, @p106, @p107, @p108, @p109, 9),
(@p110, @p111, @p112, @p113, @p114, 10),
(@p115, @p116, @p117, @p118, @p119, 11)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 16:18:06.360 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ef609faa-2ef8-478c-9b79-a0e4522f9005
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ef609faa-2ef8-478c-9b79-a0e4522f9005
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 16:18:06.368 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ef609faa-2ef8-478c-9b79-a0e4522f9005
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 16:18:06.391 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ef609faa-2ef8-478c-9b79-a0e4522f9005
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 193
2025-10-05 16:18:06.487 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:18:06.488 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 16:18:06.488 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 16:18:06.492 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 16:18:06.494 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:18:06.494 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 16:18:06.495 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 16:18:06.495 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 16:18:06.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 16:18:06.499 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:18:06.501 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:18:06.502 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:18:06.503 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:18:06.506 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.508 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.510 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.513 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:18:06.514 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:18:06.516 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.520 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.522 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.524 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.528 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.531 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.535 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.538 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:18:06.540 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:18:06.542 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:18:06.545 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 16:18:06.548 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 16:18:06.565 +07:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Size = 450), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 450), @p50='?' (DbType = Int32), @p51='?' (DbType = DateTime2), @p52='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p53='?' (DbType = Int32), @p54='?' (DbType = Int32), @p55='?' (DbType = Int32), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Size = 450), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = Int32), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p74='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Int32), @p78='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p79='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p80='?' (DbType = Int32), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32), @p87='?' (DbType = Int32), @p88='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p89='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p90='?' (DbType = Int32), @p91='?' (DbType = Int32), @p92='?' (DbType = Int32), @p93='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p94='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p95='?' (DbType = Int32), @p96='?' (DbType = Int32), @p97='?' (DbType = Int32), @p98='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p99='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p100='?' (DbType = Int32), @p101='?' (DbType = Int32), @p102='?' (DbType = Int32), @p103='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p104='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49),
(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59);
MERGE [OrderItems] USING (
VALUES (@p60, @p61, @p62, @p63, @p64, 0),
(@p65, @p66, @p67, @p68, @p69, 1),
(@p70, @p71, @p72, @p73, @p74, 2),
(@p75, @p76, @p77, @p78, @p79, 3),
(@p80, @p81, @p82, @p83, @p84, 4),
(@p85, @p86, @p87, @p88, @p89, 5),
(@p90, @p91, @p92, @p93, @p94, 6),
(@p95, @p96, @p97, @p98, @p99, 7),
(@p100, @p101, @p102, @p103, @p104, 8)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 16:18:06.569 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ef609faa-2ef8-478c-9b79-a0e4522f9005
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ef609faa-2ef8-478c-9b79-a0e4522f9005
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 16:18:06.573 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ef609faa-2ef8-478c-9b79-a0e4522f9005
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 16:18:06.577 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ef609faa-2ef8-478c-9b79-a0e4522f9005
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 303
2025-10-05 16:18:06.580 +07:00 [INF] BookStore application starting up...
2025-10-05 16:18:06.679 +07:00 [INF] Now listening on: http://localhost:5232
2025-10-05 16:18:06.679 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-05 16:18:06.679 +07:00 [INF] Hosting environment: Development
2025-10-05 16:18:06.679 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-10-05 16:18:06.726 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:18:06.741 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-05 16:18:06.783 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:18:06.794 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:18:06.976 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:18:07.021 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:18:07.033 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 16:18:07.081 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:18:07.102 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:18:07.119 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:18:07.136 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:18:07.146 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:18:07.169 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:18:07.184 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 16:18:07.207 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:18:07.225 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:18:07.244 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:18:07.285 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:18:07.423 +07:00 [INF] Executed ViewResult - view Index executed in 139.7372ms.
2025-10-05 16:18:07.426 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 630.9291ms
2025-10-05 16:18:07.427 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:18:07.434 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 709.9548ms
2025-10-05 16:18:07.445 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:18:07.448 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:18:07.448 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:18:07.450 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 2.1748ms
2025-10-05 16:18:07.452 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 7.3044ms
2025-10-05 16:18:07.454 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:18:07.460 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 11.1783ms
2025-10-05 16:18:07.462 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:18:07.467 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:18:07.468 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:18:07.468 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:18:07.472 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 3.8186ms
2025-10-05 16:18:07.472 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 3.8717ms
2025-10-05 16:18:07.472 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 4.9168ms
2025-10-05 16:18:07.472 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:18:07.472 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:18:07.472 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:18:07.512 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:18:07.513 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.8924ms
2025-10-05 16:18:07.513 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:18:07.516 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:18:07.517 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:18:07.517 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.1281ms
2025-10-05 16:18:07.518 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:18:07.518 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:18:07.518 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.9845ms
2025-10-05 16:18:07.519 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:18:07.519 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.4419ms
2025-10-05 16:18:07.519 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:18:10.821 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:18:10.822 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:18:10.823 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:18:10.828 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:18:10.841 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:18:10.846 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:18:10.850 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:18:10.854 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:18:10.856 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:18:10.859 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:18:10.861 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:18:10.864 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:18:10.868 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:18:10.871 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:18:10.873 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:18:10.887 +07:00 [INF] Executed ViewResult - view Index executed in 13.8087ms.
2025-10-05 16:18:10.887 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 64.1241ms
2025-10-05 16:18:10.887 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:18:10.888 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 66.0526ms
2025-10-05 16:18:10.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:18:10.910 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.3995ms
2025-10-05 16:18:10.910 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:18:10.912 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:18:10.913 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.9036ms
2025-10-05 16:18:10.914 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:18:10.915 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.9757ms
2025-10-05 16:18:10.916 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:18:10.917 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:18:10.917 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:18:10.918 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:18:10.919 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.2062ms
2025-10-05 16:18:10.919 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:18:10.919 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 1.238ms
2025-10-05 16:18:10.919 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:18:10.920 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.6592ms
2025-10-05 16:18:10.920 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:18:10.920 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:18:10.921 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.2003ms
2025-10-05 16:18:10.921 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:18:10.922 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:18:10.922 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:18:10.924 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.3182ms
2025-10-05 16:18:10.924 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.3187ms
2025-10-05 16:18:10.924 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:18:10.924 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:18:10.924 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:18:10.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.2671ms
2025-10-05 16:18:10.926 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:18:12.143 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:18:12.143 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:18:12.147 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:18:12.158 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:18:12.162 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:18:12.164 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:18:12.166 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:18:12.167 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:18:12.168 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:18:12.169 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:18:12.171 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:18:12.173 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:18:12.175 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:18:12.177 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:18:12.180 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:18:12.224 +07:00 [INF] Executed ViewResult - view Index executed in 45.4565ms.
2025-10-05 16:18:12.224 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 76.9426ms
2025-10-05 16:18:12.224 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:18:12.224 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 81.7269ms
2025-10-05 16:18:12.237 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:18:12.238 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.2038ms
2025-10-05 16:18:12.238 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:18:12.239 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:18:12.240 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:18:12.240 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.443ms
2025-10-05 16:18:12.240 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:18:12.240 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:18:12.242 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:18:12.243 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:18:12.243 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 3.0414ms
2025-10-05 16:18:12.243 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 3.2269ms
2025-10-05 16:18:12.243 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:18:12.243 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.3865ms
2025-10-05 16:18:12.243 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 3.0111ms
2025-10-05 16:18:12.243 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:18:12.243 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:18:12.244 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:18:12.243 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:18:12.244 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.1466ms
2025-10-05 16:18:12.244 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.1455ms
2025-10-05 16:18:12.244 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:18:12.244 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:18:12.247 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:18:12.247 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:18:12.248 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.8002ms
2025-10-05 16:18:12.248 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.8001ms
2025-10-05 16:18:12.248 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:18:12.248 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:18:26.170 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/account/Login - null null
2025-10-05 16:18:26.172 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 16:18:26.180 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-10-05 16:18:26.197 +07:00 [INF] Executing ViewResult, running view Login.
2025-10-05 16:18:26.277 +07:00 [INF] Executed ViewResult - view Login executed in 80.6613ms.
2025-10-05 16:18:26.277 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 96.6077ms
2025-10-05 16:18:26.277 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 16:18:26.277 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/account/Login - 200 null text/html; charset=utf-8 107.4763ms
2025-10-05 16:18:26.302 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:18:26.302 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:18:26.302 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:18:26.302 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:18:26.302 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:18:26.302 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - null null
2025-10-05 16:18:26.303 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.6779ms
2025-10-05 16:18:26.303 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.6696ms
2025-10-05 16:18:26.303 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:18:26.303 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.7667ms
2025-10-05 16:18:26.303 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - 404 0 null 0.5887ms
2025-10-05 16:18:26.303 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.6124ms
2025-10-05 16:18:26.303 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/bookverse-core.js, Response status code: 404
2025-10-05 16:18:26.303 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:18:26.303 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.7956ms
2025-10-05 16:18:26.303 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:18:26.303 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:18:26.303 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:18:26.307 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:18:26.307 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - null null
2025-10-05 16:18:26.307 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2633ms
2025-10-05 16:18:26.308 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:18:26.308 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:18:26.308 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - 404 0 null 0.7725ms
2025-10-05 16:18:26.308 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.4449ms
2025-10-05 16:18:26.308 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.4601ms
2025-10-05 16:18:26.308 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:18:26.308 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:18:26.308 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/auth-validation.js, Response status code: 404
2025-10-05 16:18:26.309 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:18:26.310 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.7072ms
2025-10-05 16:18:26.310 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:18:36.756 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/account/Register - null null
2025-10-05 16:18:36.759 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Register (BookStoreMVC)'
2025-10-05 16:18:36.761 +07:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-10-05 16:18:36.766 +07:00 [INF] Executing ViewResult, running view Register.
2025-10-05 16:18:36.819 +07:00 [INF] Executed ViewResult - view Register executed in 53.7712ms.
2025-10-05 16:18:36.819 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Register (BookStoreMVC) in 58.5416ms
2025-10-05 16:18:36.819 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Register (BookStoreMVC)'
2025-10-05 16:18:36.820 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/account/Register - 200 null text/html; charset=utf-8 63.6665ms
2025-10-05 16:18:36.836 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:18:36.837 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.6498ms
2025-10-05 16:18:36.837 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:18:36.841 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:18:36.841 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:18:36.841 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:18:36.842 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:18:36.842 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - null null
2025-10-05 16:18:36.842 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - null null
2025-10-05 16:18:36.842 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.1244ms
2025-10-05 16:18:36.842 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.6017ms
2025-10-05 16:18:36.842 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.8956ms
2025-10-05 16:18:36.842 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 1.126ms
2025-10-05 16:18:36.843 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:18:36.843 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:18:36.843 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:18:36.843 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:18:36.843 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - 404 0 null 0.8567ms
2025-10-05 16:18:36.843 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/bookverse-core.js, Response status code: 404
2025-10-05 16:18:36.844 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - 404 0 null 1.6694ms
2025-10-05 16:18:36.844 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/auth-validation.js, Response status code: 404
2025-10-05 16:18:36.846 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:18:36.846 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:18:36.846 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2168ms
2025-10-05 16:18:36.847 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:18:36.847 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:18:36.847 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.5985ms
2025-10-05 16:18:36.847 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:18:36.847 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.4532ms
2025-10-05 16:18:36.847 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.4912ms
2025-10-05 16:18:36.847 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:18:36.847 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:18:55.395 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:18:55.396 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:18:55.396 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:18:55.399 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:18:55.403 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:18:55.407 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:18:55.409 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:18:55.410 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:18:55.411 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:18:55.414 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:18:55.417 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:18:55.418 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:18:55.420 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:18:55.423 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:18:55.424 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:18:55.427 +07:00 [INF] Executed ViewResult - view Index executed in 3.3993ms.
2025-10-05 16:18:55.427 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 30.7825ms
2025-10-05 16:18:55.427 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:18:55.427 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 32.14ms
2025-10-05 16:18:55.453 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:18:55.453 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.5405ms
2025-10-05 16:18:55.453 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:18:55.456 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:18:55.456 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:18:55.456 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:18:55.456 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4385ms
2025-10-05 16:18:55.457 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:18:55.457 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:18:55.457 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:18:55.457 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.6751ms
2025-10-05 16:18:55.457 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.2962ms
2025-10-05 16:18:55.457 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:18:55.457 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:18:55.457 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.3195ms
2025-10-05 16:18:55.457 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.7259ms
2025-10-05 16:18:55.457 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:18:55.457 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:18:55.458 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.6561ms
2025-10-05 16:18:55.458 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:18:55.460 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:18:55.460 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:18:55.460 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:18:55.461 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.7261ms
2025-10-05 16:18:55.461 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.8755ms
2025-10-05 16:18:55.461 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:18:55.461 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:18:55.461 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.7857ms
2025-10-05 16:18:55.461 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:19:02.244 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-10-05 16:19:02.249 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-10-05 16:19:02.253 +07:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-10-05 16:19:02.253 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 302 0 null 8.9659ms
2025-10-05 16:19:02.258 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Account/Login?ReturnUrl=%2FAdmin - null null
2025-10-05 16:19:02.263 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 16:19:02.263 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-10-05 16:19:02.272 +07:00 [INF] Executing ViewResult, running view Login.
2025-10-05 16:19:02.283 +07:00 [INF] Executed ViewResult - view Login executed in 10.7834ms.
2025-10-05 16:19:02.283 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 20.0244ms
2025-10-05 16:19:02.283 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 16:19:02.283 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Account/Login?ReturnUrl=%2FAdmin - 200 null text/html; charset=utf-8 25.7465ms
2025-10-05 16:19:02.316 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:19:02.317 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.7393ms
2025-10-05 16:19:02.317 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:19:02.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:19:02.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:19:02.322 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:19:02.323 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:19:02.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.7771ms
2025-10-05 16:19:02.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.6294ms
2025-10-05 16:19:02.323 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:19:02.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.7656ms
2025-10-05 16:19:02.323 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:19:02.323 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:19:02.323 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - null null
2025-10-05 16:19:02.323 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - null null
2025-10-05 16:19:02.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - 404 0 null 0.2121ms
2025-10-05 16:19:02.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.4598ms
2025-10-05 16:19:02.323 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/bookverse-core.js, Response status code: 404
2025-10-05 16:19:02.324 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - 404 0 null 0.366ms
2025-10-05 16:19:02.324 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:19:02.324 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/auth-validation.js, Response status code: 404
2025-10-05 16:19:02.328 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:02.329 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4949ms
2025-10-05 16:19:02.329 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:19:02.329 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:19:02.330 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:19:02.330 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.8559ms
2025-10-05 16:19:02.330 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.4581ms
2025-10-05 16:19:02.330 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:19:02.330 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.7255ms
2025-10-05 16:19:02.330 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:19:02.330 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:19:03.928 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5232/account/Login - application/x-www-form-urlencoded 267
2025-10-05 16:19:03.929 +07:00 [INF] CORS policy execution failed.
2025-10-05 16:19:03.929 +07:00 [INF] Request origin http://localhost:5232 does not have permission to access the resource.
2025-10-05 16:19:03.930 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 16:19:03.938 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookStoreMVC.Models.ViewModels.LoginViewModel, System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-10-05 16:19:03.979 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-10-05 16:19:04.220 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-10-05 16:19:04.272 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-10-05 16:19:04.274 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:19:04.281 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-10-05 16:19:04.285 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-10-05 16:19:04.287 +07:00 [INF] User logged in.
2025-10-05 16:19:04.288 +07:00 [INF] Executing LocalRedirectResult, redirecting to /Admin.
2025-10-05 16:19:04.288 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 349.9115ms
2025-10-05 16:19:04.288 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 16:19:04.289 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5232/account/Login - 302 0 null 360.4863ms
2025-10-05 16:19:04.292 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-10-05 16:19:04.296 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 16:19:04.298 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:04.310 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:19:04.315 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:19:04.319 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-10-05 16:19:04.324 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-10-05 16:19:04.325 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:19:04.330 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-10-05 16:19:04.336 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-10-05 16:19:04.340 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-10-05 16:19:04.358 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-10-05 16:19:04.373 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:19:04.387 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 16:19:04.391 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-05 16:19:04.401 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-10-05 16:19:04.459 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-10-05 16:19:04.462 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-10-05 16:19:04.595 +07:00 [INF] Executed ViewResult - view Dashboard executed in 133.8147ms.
2025-10-05 16:19:04.595 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 297.3338ms
2025-10-05 16:19:04.595 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 16:19:04.596 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 303.7401ms
2025-10-05 16:19:04.616 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:04.618 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.9382ms
2025-10-05 16:19:04.618 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:04.618 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:04.619 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4032ms
2025-10-05 16:19:05.262 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - null null
2025-10-05 16:19:05.265 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - 404 0 null 3.5264ms
2025-10-05 16:19:05.266 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Admin/GetDashboardStats, Response status code: 404
2025-10-05 16:19:08.705 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - null null
2025-10-05 16:19:08.708 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:19:08.732 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:08.747 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:19:08.749 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:19:08.751 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:19:08.757 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:19:08.809 +07:00 [INF] Executed ViewResult - view Books executed in 53.288ms.
2025-10-05 16:19:08.809 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 76.6416ms
2025-10-05 16:19:08.809 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:19:08.809 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - 200 null text/html; charset=utf-8 104.222ms
2025-10-05 16:19:08.826 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:08.828 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.3061ms
2025-10-05 16:19:08.828 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:08.830 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:08.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2087ms
2025-10-05 16:19:10.092 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books/create?area=Admin - null null
2025-10-05 16:19:10.093 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC)'
2025-10-05 16:19:10.096 +07:00 [INF] Route matched with {action = "CreateBook", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:10.107 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:19:10.111 +07:00 [INF] Executing ViewResult, running view CreateBook.
2025-10-05 16:19:10.229 +07:00 [INF] Executed ViewResult - view CreateBook executed in 118.8554ms.
2025-10-05 16:19:10.229 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC) in 133.2799ms
2025-10-05 16:19:10.229 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC)'
2025-10-05 16:19:10.229 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books/create?area=Admin - 200 null text/html; charset=utf-8 137.5093ms
2025-10-05 16:19:10.247 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:10.248 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.926ms
2025-10-05 16:19:10.248 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:10.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:10.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/lib/jquery-validation/dist/jquery.validate.min.js - null null
2025-10-05 16:19:10.250 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2546ms
2025-10-05 16:19:10.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - null null
2025-10-05 16:19:10.251 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - 404 0 null 0.7046ms
2025-10-05 16:19:10.251 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js, Response status code: 404
2025-10-05 16:19:10.255 +07:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.min.js was not modified
2025-10-05 16:19:10.256 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/lib/jquery-validation/dist/jquery.validate.min.js - 304 null text/javascript 5.9708ms
2025-10-05 16:19:16.165 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - null null
2025-10-05 16:19:16.166 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 16:19:16.175 +07:00 [INF] Route matched with {action = "Categories", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Categories(BookStoreMVC.Models.ViewModels.CategoryListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:16.189 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:19:16.195 +07:00 [INF] Executing ViewResult, running view Categories.
2025-10-05 16:19:16.216 +07:00 [INF] Executed ViewResult - view Categories executed in 21.6372ms.
2025-10-05 16:19:16.216 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC) in 40.764ms
2025-10-05 16:19:16.216 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 16:19:16.216 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - 200 null text/html; charset=utf-8 50.7667ms
2025-10-05 16:19:16.237 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:16.238 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.1774ms
2025-10-05 16:19:16.238 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:16.240 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:16.240 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.169ms
2025-10-05 16:19:17.490 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/categories/create?area=Admin - null null
2025-10-05 16:19:17.491 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.CreateCategory (BookStoreMVC)'
2025-10-05 16:19:17.492 +07:00 [INF] Route matched with {action = "CreateCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCategory() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:17.496 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:19:17.499 +07:00 [INF] Executing ViewResult, running view CreateCategory.
2025-10-05 16:19:17.542 +07:00 [INF] Executed ViewResult - view CreateCategory executed in 43.5371ms.
2025-10-05 16:19:17.542 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.CreateCategory (BookStoreMVC) in 49.1579ms
2025-10-05 16:19:17.542 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.CreateCategory (BookStoreMVC)'
2025-10-05 16:19:17.542 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/categories/create?area=Admin - 200 null text/html; charset=utf-8 51.9885ms
2025-10-05 16:19:17.561 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:17.562 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.908ms
2025-10-05 16:19:17.562 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:17.565 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:17.565 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - null null
2025-10-05 16:19:17.565 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.239ms
2025-10-05 16:19:17.566 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - 404 0 null 1.071ms
2025-10-05 16:19:17.566 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js, Response status code: 404
2025-10-05 16:19:19.688 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/categories - null null
2025-10-05 16:19:19.689 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 16:19:19.689 +07:00 [INF] Route matched with {action = "Categories", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Categories(BookStoreMVC.Models.ViewModels.CategoryListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:19.691 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:19:19.692 +07:00 [INF] Executing ViewResult, running view Categories.
2025-10-05 16:19:19.694 +07:00 [INF] Executed ViewResult - view Categories executed in 2.3914ms.
2025-10-05 16:19:19.694 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC) in 5.1165ms
2025-10-05 16:19:19.694 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 16:19:19.695 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/categories - 200 null text/html; charset=utf-8 6.1604ms
2025-10-05 16:19:19.719 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:19.720 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.7179ms
2025-10-05 16:19:19.720 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:19.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:19.721 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2538ms
2025-10-05 16:19:20.633 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard - null null
2025-10-05 16:19:20.634 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 16:19:20.637 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:20.639 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:19:20.640 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:19:20.641 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-10-05 16:19:20.641 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-10-05 16:19:20.644 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:19:20.646 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-10-05 16:19:20.647 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-10-05 16:19:20.648 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-10-05 16:19:20.649 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-10-05 16:19:20.652 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:19:20.653 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 16:19:20.654 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-10-05 16:19:20.657 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-10-05 16:19:20.658 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-10-05 16:19:20.661 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.9397ms.
2025-10-05 16:19:20.661 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 24.4107ms
2025-10-05 16:19:20.661 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 16:19:20.662 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard - 200 null text/html; charset=utf-8 28.4777ms
2025-10-05 16:19:20.682 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:20.683 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.7573ms
2025-10-05 16:19:20.683 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:20.690 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:20.690 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2311ms
2025-10-05 16:19:20.756 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - null null
2025-10-05 16:19:20.758 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - 404 0 null 1.3949ms
2025-10-05 16:19:20.758 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Admin/GetDashboardStats, Response status code: 404
2025-10-05 16:19:21.270 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - null null
2025-10-05 16:19:21.271 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 16:19:21.271 +07:00 [INF] Route matched with {action = "Categories", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Categories(BookStoreMVC.Models.ViewModels.CategoryListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:21.273 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:19:21.274 +07:00 [INF] Executing ViewResult, running view Categories.
2025-10-05 16:19:21.275 +07:00 [INF] Executed ViewResult - view Categories executed in 1.6122ms.
2025-10-05 16:19:21.275 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC) in 4.3486ms
2025-10-05 16:19:21.275 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 16:19:21.276 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - 200 null text/html; charset=utf-8 5.364ms
2025-10-05 16:19:21.309 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:21.309 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.7892ms
2025-10-05 16:19:21.309 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:21.312 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:21.312 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3957ms
2025-10-05 16:19:22.629 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/orders?area=Admin - null null
2025-10-05 16:19:22.630 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Orders (BookStoreMVC)'
2025-10-05 16:19:22.636 +07:00 [INF] Route matched with {action = "Orders", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Orders(BookStoreMVC.Models.ViewModels.OrderListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:22.661 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-10-05 16:19:22.699 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[Discount], [o0].[PaymentId], [o0].[ShippingInfoId], [o0].[Status], [o0].[SubTotal], [o0].[Tax], [o0].[Total], [o0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [s].[Id], [s].[Address], [s].[City], [s].[Country], [s].[FirstName], [s].[LastName], [s].[Phone], [s].[PostalCode], [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[Method], [p].[OrderId], [p].[Status], [p].[TransactionId], [s0].[Id], [s0].[BookId], [s0].[OrderId], [s0].[Quantity], [s0].[Total], [s0].[UnitPrice], [s0].[Id0], [s0].[AdditionalImages], [s0].[Author], [s0].[CategoryId], [s0].[CreatedAt], [s0].[Description], [s0].[DiscountPrice], [s0].[ImageContentType], [s0].[ImageFileName], [s0].[ImageFileSize], [s0].[ImageUrl], [s0].[IsActive], [s0].[Language], [s0].[PageCount], [s0].[Price], [s0].[PublishDate], [s0].[Publisher], [s0].[StockQuantity], [s0].[Title], [s0].[UpdatedAt]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
INNER JOIN [ShippingInfos] AS [s] ON [o0].[ShippingInfoId] = [s].[Id]
LEFT JOIN [Payments] AS [p] ON [o0].[Id] = [p].[OrderId]
LEFT JOIN (
    SELECT [o1].[Id], [o1].[BookId], [o1].[OrderId], [o1].[Quantity], [o1].[Total], [o1].[UnitPrice], [b].[Id] AS [Id0], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [OrderItems] AS [o1]
    LEFT JOIN [Books] AS [b] ON [o1].[BookId] = [b].[Id]
) AS [s0] ON [o0].[Id] = [s0].[OrderId]
ORDER BY [o0].[CreatedAt] DESC, [o0].[Id], [a].[Id], [s].[Id], [p].[Id], [s0].[Id]
2025-10-05 16:19:22.703 +07:00 [INF] Executing ViewResult, running view Orders.
2025-10-05 16:19:22.715 +07:00 [INF] Executed ViewResult - view Orders executed in 13.431ms.
2025-10-05 16:19:22.715 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Orders (BookStoreMVC) in 78.9069ms
2025-10-05 16:19:22.715 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Orders (BookStoreMVC)'
2025-10-05 16:19:22.716 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/orders?area=Admin - 200 null text/html; charset=utf-8 86.5933ms
2025-10-05 16:19:22.736 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:19:22.736 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.8421ms
2025-10-05 16:19:22.737 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:19:22.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:19:22.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:19:22.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:22.739 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2685ms
2025-10-05 16:19:22.740 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:19:22.740 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.578ms
2025-10-05 16:19:22.740 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.0689ms
2025-10-05 16:19:22.740 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 1.0684ms
2025-10-05 16:19:22.740 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:19:22.740 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:19:22.740 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:19:22.740 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:19:22.741 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:19:22.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.6452ms
2025-10-05 16:19:22.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.8446ms
2025-10-05 16:19:22.741 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:19:22.741 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:19:22.744 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:19:22.745 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:19:22.745 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.8851ms
2025-10-05 16:19:22.745 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.7238ms
2025-10-05 16:19:22.746 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:19:22.746 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:19:23.884 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - null null
2025-10-05 16:19:23.885 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 16:19:23.885 +07:00 [INF] Route matched with {action = "Categories", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Categories(BookStoreMVC.Models.ViewModels.CategoryListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:23.887 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:19:23.888 +07:00 [INF] Executing ViewResult, running view Categories.
2025-10-05 16:19:23.890 +07:00 [INF] Executed ViewResult - view Categories executed in 1.5051ms.
2025-10-05 16:19:23.890 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC) in 4.5428ms
2025-10-05 16:19:23.890 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Categories (BookStoreMVC)'
2025-10-05 16:19:23.890 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/categories?area=Admin - 200 null text/html; charset=utf-8 5.6812ms
2025-10-05 16:19:23.916 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:23.916 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1651ms
2025-10-05 16:19:25.017 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - null null
2025-10-05 16:19:25.018 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 16:19:25.020 +07:00 [INF] Route matched with {action = "Users", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Users() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:25.024 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 16:19:25.028 +07:00 [INF] Executing ViewResult, running view Users.
2025-10-05 16:19:25.046 +07:00 [INF] Executed ViewResult - view Users executed in 19.84ms.
2025-10-05 16:19:25.047 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC) in 26.1409ms
2025-10-05 16:19:25.047 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Users (BookStoreMVC)'
2025-10-05 16:19:25.047 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/users?area=Admin - 200 null text/html; charset=utf-8 29.6692ms
2025-10-05 16:19:25.069 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:25.070 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.0601ms
2025-10-05 16:19:25.070 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:25.072 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:25.072 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2046ms
2025-10-05 16:19:28.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin - null null
2025-10-05 16:19:28.630 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 16:19:28.630 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:28.631 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:19:28.632 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:19:28.632 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-10-05 16:19:28.633 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-10-05 16:19:28.634 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:19:28.634 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-10-05 16:19:28.636 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-10-05 16:19:28.637 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-10-05 16:19:28.639 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-10-05 16:19:28.642 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:19:28.647 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 16:19:28.649 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-10-05 16:19:28.651 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-10-05 16:19:28.652 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-10-05 16:19:28.654 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.4383ms.
2025-10-05 16:19:28.654 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 24.1182ms
2025-10-05 16:19:28.655 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 16:19:28.655 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin - 200 null text/html; charset=utf-8 25.2729ms
2025-10-05 16:19:28.684 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:28.686 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.3611ms
2025-10-05 16:19:28.686 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:28.688 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:28.688 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2157ms
2025-10-05 16:19:28.753 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - null null
2025-10-05 16:19:28.754 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - 404 0 null 0.9975ms
2025-10-05 16:19:28.754 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Admin/GetDashboardStats, Response status code: 404
2025-10-05 16:19:30.755 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/settings?area=Admin - null null
2025-10-05 16:19:30.756 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Settings (BookStoreMVC)'
2025-10-05 16:19:30.757 +07:00 [INF] Route matched with {action = "Settings", controller = "Admin"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Settings() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:30.760 +07:00 [INF] Executing ViewResult, running view Settings.
2025-10-05 16:19:30.773 +07:00 [INF] Executed ViewResult - view Settings executed in 13.4685ms.
2025-10-05 16:19:30.773 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Settings (BookStoreMVC) in 15.6895ms
2025-10-05 16:19:30.773 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Settings (BookStoreMVC)'
2025-10-05 16:19:30.773 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/settings?area=Admin - 200 null text/html; charset=utf-8 17.7996ms
2025-10-05 16:19:30.790 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:30.791 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.069ms
2025-10-05 16:19:30.791 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:30.793 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:30.794 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4271ms
2025-10-05 16:19:32.222 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin - null null
2025-10-05 16:19:32.223 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 16:19:32.223 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:19:32.224 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:19:32.225 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:19:32.225 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-10-05 16:19:32.225 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-10-05 16:19:32.226 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:19:32.227 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-10-05 16:19:32.227 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-10-05 16:19:32.228 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-10-05 16:19:32.229 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-10-05 16:19:32.231 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:19:32.233 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 16:19:32.235 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-10-05 16:19:32.237 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-10-05 16:19:32.238 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-10-05 16:19:32.238 +07:00 [INF] Executed ViewResult - view Dashboard executed in 0.8349ms.
2025-10-05 16:19:32.239 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 15.6484ms
2025-10-05 16:19:32.239 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 16:19:32.239 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin - 200 null text/html; charset=utf-8 16.8194ms
2025-10-05 16:19:32.260 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:19:32.261 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.9675ms
2025-10-05 16:19:32.261 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:19:32.263 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:19:32.263 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2638ms
2025-10-05 16:19:32.321 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - null null
2025-10-05 16:19:32.321 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - 404 0 null 0.5996ms
2025-10-05 16:19:32.322 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Admin/GetDashboardStats, Response status code: 404
2025-10-05 16:20:19.345 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-05 16:20:20.030 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:20:20.039 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 16:20:20.060 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 16:20:20.112 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 16:20:20.124 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:20:20.125 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 16:20:20.130 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 16:20:20.137 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 16:20:20.140 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 16:20:20.321 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:20:20.357 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:20:20.359 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:20:20.360 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:20:20.373 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.406 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.408 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.423 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:20:20.430 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:20:20.432 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.434 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.436 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.437 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.438 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.439 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.439 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.440 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.447 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:20:20.453 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:20:20.465 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-05 16:20:20.474 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 16:20:20.482 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 16:20:20.685 +07:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Size = 450), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Size = 450), @p50='?' (DbType = Int32), @p51='?' (DbType = Int32), @p52='?' (DbType = Int32), @p53='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p54='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (DbType = Int32), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = Int32), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p74='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Int32), @p78='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p79='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p80='?' (DbType = Int32), @p81='?' (DbType = Int32), @p82='?' (DbType = Int32), @p83='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p84='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
MERGE [OrderItems] USING (
VALUES (@p50, @p51, @p52, @p53, @p54, 0),
(@p55, @p56, @p57, @p58, @p59, 1),
(@p60, @p61, @p62, @p63, @p64, 2),
(@p65, @p66, @p67, @p68, @p69, 3),
(@p70, @p71, @p72, @p73, @p74, 4),
(@p75, @p76, @p77, @p78, @p79, 5),
(@p80, @p81, @p82, @p83, @p84, 6)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 16:20:20.696 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:33038bf2-f40d-4559-88ad-14dcaebe9a7a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:33038bf2-f40d-4559-88ad-14dcaebe9a7a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 16:20:20.701 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:33038bf2-f40d-4559-88ad-14dcaebe9a7a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 16:20:20.715 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:33038bf2-f40d-4559-88ad-14dcaebe9a7a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 193
2025-10-05 16:20:20.798 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:20:20.798 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-05 16:20:20.799 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-05 16:20:20.802 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-05 16:20:20.803 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-05 16:20:20.804 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-05 16:20:20.804 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-05 16:20:20.805 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-10-05 16:20:20.805 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-05 16:20:20.806 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:20:20.807 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:20:20.808 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:20:20.810 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:20:20.811 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.812 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.813 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.814 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:20:20.815 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:20:20.816 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.818 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.819 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.819 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.821 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.822 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.823 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.825 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-05 16:20:20.826 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:20:20.827 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Orders] AS [o]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-05 16:20:20.827 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Email] NOT LIKE N'%admin%' OR [a].[Email] IS NULL) AND ([a].[Email] NOT LIKE N'%manager%' OR [a].[Email] IS NULL)
2025-10-05 16:20:20.828 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM [Books] AS [b]
2025-10-05 16:20:20.838 +07:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 450), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 450), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p28='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p29='?' (Size = 450), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p39='?' (Size = 450), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p44='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p45='?' (DbType = Int32), @p46='?' (DbType = Int32), @p47='?' (DbType = Int32), @p48='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p49='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p50='?' (DbType = Int32), @p51='?' (DbType = Int32), @p52='?' (DbType = Int32), @p53='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p54='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (DbType = Int32), @p58='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p59='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p60='?' (DbType = Int32), @p61='?' (DbType = Int32), @p62='?' (DbType = Int32), @p63='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p64='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = Int32), @p68='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p69='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p70='?' (DbType = Int32), @p71='?' (DbType = Int32), @p72='?' (DbType = Int32), @p73='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p74='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p75='?' (DbType = Int32), @p76='?' (DbType = Int32), @p77='?' (DbType = Int32), @p78='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p79='?' (Precision = 10) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([Id], [CreatedAt], [Discount], [PaymentId], [ShippingInfoId], [Status], [SubTotal], [Tax], [Total], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39);
MERGE [OrderItems] USING (
VALUES (@p40, @p41, @p42, @p43, @p44, 0),
(@p45, @p46, @p47, @p48, @p49, 1),
(@p50, @p51, @p52, @p53, @p54, 2),
(@p55, @p56, @p57, @p58, @p59, 3),
(@p60, @p61, @p62, @p63, @p64, 4),
(@p65, @p66, @p67, @p68, @p69, 5),
(@p70, @p71, @p72, @p73, @p74, 6),
(@p75, @p76, @p77, @p78, @p79, 7)) AS i ([BookId], [OrderId], [Quantity], [Total], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([BookId], [OrderId], [Quantity], [Total], [UnitPrice])
VALUES (i.[BookId], i.[OrderId], i.[Quantity], i.[Total], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-10-05 16:20:20.839 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookStoreMVC.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:33038bf2-f40d-4559-88ad-14dcaebe9a7a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:33038bf2-f40d-4559-88ad-14dcaebe9a7a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-05 16:20:20.842 +07:00 [ERR] An error occurred while initializing the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:33038bf2-f40d-4559-88ad-14dcaebe9a7a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
2025-10-05 16:20:20.845 +07:00 [ERR] An error occurred while seeding the database.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Orders' when IDENTITY_INSERT is set to OFF.
The MERGE statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Orders_OrderId". The conflict occurred in database "BookStoreMVC", table "dbo.Orders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:33038bf2-f40d-4559-88ad-14dcaebe9a7a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookStoreMVC.Data.DbInitializer.SeedSampleOrders(ApplicationDbContext context) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 551
   at BookStoreMVC.Data.DbInitializer.Initialize(IServiceProvider serviceProvider) in E:\BookMwc\BookStoreMWC\Data\DbInitializer.cs:line 41
   at Program.<Main>$(String[] args) in E:\BookMwc\BookStoreMWC\Program.cs:line 303
2025-10-05 16:20:20.848 +07:00 [INF] BookStore application starting up...
2025-10-05 16:20:20.903 +07:00 [INF] Now listening on: http://localhost:5232
2025-10-05 16:20:20.904 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-05 16:20:20.904 +07:00 [INF] Hosting environment: Development
2025-10-05 16:20:20.904 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-10-05 16:31:21.642 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:31:21.653 +07:00 [WRN] Failed to determine the https port for redirect.
2025-10-05 16:31:21.723 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:31:21.734 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:31:21.936 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:31:21.980 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:31:21.989 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 16:31:22.020 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:31:22.032 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:31:22.043 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:31:22.056 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:31:22.068 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:31:22.102 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:31:22.111 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-05 16:31:22.132 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:31:22.154 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:22.184 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:31:22.226 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:31:22.399 +07:00 [INF] Executed ViewResult - view Index executed in 173.0279ms.
2025-10-05 16:31:22.403 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 669.1679ms
2025-10-05 16:31:22.404 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:31:22.405 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:31:22.406 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:31:22.406 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:31:22.407 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:31:22.408 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:31:22.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 4.3913ms
2025-10-05 16:31:22.412 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 5.6457ms
2025-10-05 16:31:22.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 5.6541ms
2025-10-05 16:31:22.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 7.4144ms
2025-10-05 16:31:22.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 4.7471ms
2025-10-05 16:31:22.414 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 773.3736ms
2025-10-05 16:31:22.414 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:31:22.414 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:31:22.414 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:31:22.414 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:31:22.414 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:31:22.415 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:31:22.418 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:22.418 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:31:22.418 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:31:22.418 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:31:22.419 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.906ms
2025-10-05 16:31:22.419 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.829ms
2025-10-05 16:31:22.419 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 4.2062ms
2025-10-05 16:31:22.419 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.9762ms
2025-10-05 16:31:22.420 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:31:22.420 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:31:22.420 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:31:22.420 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:31:22.421 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 3.0163ms
2025-10-05 16:31:35.405 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:31:35.406 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:31:35.406 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:31:35.412 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:31:35.420 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:31:35.425 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:31:35.427 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:31:35.429 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:31:35.431 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:31:35.432 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:31:35.433 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:31:35.434 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:31:35.438 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:35.440 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:31:35.441 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:31:35.452 +07:00 [INF] Executed ViewResult - view Index executed in 11.4574ms.
2025-10-05 16:31:35.452 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 46.0508ms
2025-10-05 16:31:35.452 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:31:35.453 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 47.9206ms
2025-10-05 16:31:35.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:31:35.476 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 2.1795ms
2025-10-05 16:31:35.477 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:31:35.477 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:35.478 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.8981ms
2025-10-05 16:31:35.481 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:31:35.482 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:31:35.482 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:31:35.482 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:31:35.482 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.9848ms
2025-10-05 16:31:35.482 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:31:35.482 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.6682ms
2025-10-05 16:31:35.482 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.7168ms
2025-10-05 16:31:35.482 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.7597ms
2025-10-05 16:31:35.482 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:31:35.483 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:31:35.483 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:31:35.483 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:31:35.483 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:31:35.484 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.1189ms
2025-10-05 16:31:35.484 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.0176ms
2025-10-05 16:31:35.484 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:31:35.484 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:31:35.488 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:31:35.488 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:31:35.489 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.1683ms
2025-10-05 16:31:35.489 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.1682ms
2025-10-05 16:31:35.489 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:31:35.489 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:31:35.917 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Book/NewBooks - null null
2025-10-05 16:31:35.918 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Book/NewBooks - 404 0 null 0.5729ms
2025-10-05 16:31:35.918 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Book/NewBooks, Response status code: 404
2025-10-05 16:31:38.696 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/account/Login - null null
2025-10-05 16:31:38.697 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 16:31:38.703 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-10-05 16:31:38.716 +07:00 [INF] Executing ViewResult, running view Login.
2025-10-05 16:31:38.745 +07:00 [INF] Executed ViewResult - view Login executed in 31.5842ms.
2025-10-05 16:31:38.746 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 42.8994ms
2025-10-05 16:31:38.746 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 16:31:38.746 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/account/Login - 200 null text/html; charset=utf-8 49.7579ms
2025-10-05 16:31:38.768 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:31:38.768 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:31:38.768 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:31:38.768 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:31:38.768 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:31:38.768 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - null null
2025-10-05 16:31:38.768 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.8506ms
2025-10-05 16:31:38.768 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.8337ms
2025-10-05 16:31:38.769 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:31:38.769 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.8341ms
2025-10-05 16:31:38.769 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:31:38.769 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.8337ms
2025-10-05 16:31:38.769 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.7226ms
2025-10-05 16:31:38.769 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:31:38.769 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - 404 0 null 0.8091ms
2025-10-05 16:31:38.769 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:31:38.769 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:31:38.769 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/bookverse-core.js, Response status code: 404
2025-10-05 16:31:38.772 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:38.773 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - null null
2025-10-05 16:31:38.773 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3829ms
2025-10-05 16:31:38.773 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:31:38.773 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:31:38.774 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:31:38.774 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.5635ms
2025-10-05 16:31:38.774 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - 404 0 null 1.4119ms
2025-10-05 16:31:38.774 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.379ms
2025-10-05 16:31:38.774 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.5595ms
2025-10-05 16:31:38.774 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:31:38.774 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:31:38.774 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/auth-validation.js, Response status code: 404
2025-10-05 16:31:38.774 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:31:41.873 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5232/account/Login - application/x-www-form-urlencoded 264
2025-10-05 16:31:41.875 +07:00 [INF] CORS policy execution failed.
2025-10-05 16:31:41.875 +07:00 [INF] Request origin http://localhost:5232 does not have permission to access the resource.
2025-10-05 16:31:41.878 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 16:31:41.884 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookStoreMVC.Models.ViewModels.LoginViewModel, System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-10-05 16:31:41.923 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-10-05 16:31:41.998 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-10-05 16:31:42.012 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-10-05 16:31:42.015 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-05 16:31:42.024 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-10-05 16:31:42.029 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-10-05 16:31:42.029 +07:00 [INF] User logged in.
2025-10-05 16:31:42.030 +07:00 [INF] Executing LocalRedirectResult, redirecting to /.
2025-10-05 16:31:42.030 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 146.2803ms
2025-10-05 16:31:42.030 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-10-05 16:31:42.032 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5232/account/Login - 302 0 null 158.7146ms
2025-10-05 16:31:42.036 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-10-05 16:31:42.040 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:31:42.041 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-10-05 16:31:42.043 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:31:42.047 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-10-05 16:31:42.049 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-10-05 16:31:42.050 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:31:42.051 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:31:42.054 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:31:42.055 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-10-05 16:31:42.057 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:31:42.057 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-10-05 16:31:42.060 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:42.062 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:31:42.063 +07:00 [INF] Executing ViewResult, running view Index.
2025-10-05 16:31:42.069 +07:00 [INF] Executed ViewResult - view Index executed in 6.0835ms.
2025-10-05 16:31:42.069 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 28.8118ms
2025-10-05 16:31:42.069 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-10-05 16:31:42.070 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 33.5082ms
2025-10-05 16:31:42.091 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-10-05 16:31:42.095 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 3.1939ms
2025-10-05 16:31:42.095 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-10-05 16:31:42.097 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:42.097 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-10-05 16:31:42.097 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2464ms
2025-10-05 16:31:42.098 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-10-05 16:31:42.099 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-10-05 16:31:42.099 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-10-05 16:31:42.101 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-10-05 16:31:42.102 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-10-05 16:31:42.106 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 7.8751ms
2025-10-05 16:31:42.106 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 7.0901ms
2025-10-05 16:31:42.106 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-10-05 16:31:42.106 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 4.8705ms
2025-10-05 16:31:42.107 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-10-05 16:31:42.106 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 4.0262ms
2025-10-05 16:31:42.107 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-10-05 16:31:42.107 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-10-05 16:31:42.106 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 9.238ms
2025-10-05 16:31:42.106 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 6.7636ms
2025-10-05 16:31:42.107 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-10-05 16:31:42.107 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-10-05 16:31:42.112 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-10-05 16:31:42.112 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-10-05 16:31:42.112 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.8031ms
2025-10-05 16:31:42.112 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.8032ms
2025-10-05 16:31:42.112 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-10-05 16:31:42.112 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-10-05 16:31:51.002 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-10-05 16:31:51.006 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 16:31:51.015 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:31:51.027 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-10-05 16:31:51.035 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:51.043 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-10-05 16:31:51.048 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:51.048 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-10-05 16:31:51.053 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-10-05 16:31:51.057 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-10-05 16:31:51.062 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-10-05 16:31:51.075 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-10-05 16:31:51.089 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-10-05 16:31:51.100 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-10-05 16:31:51.102 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-10-05 16:31:51.109 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-10-05 16:31:51.131 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-10-05 16:31:51.134 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-10-05 16:31:51.186 +07:00 [INF] Executed ViewResult - view Dashboard executed in 52.7758ms.
2025-10-05 16:31:51.186 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 170.4541ms
2025-10-05 16:31:51.186 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-10-05 16:31:51.186 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 183.5342ms
2025-10-05 16:31:51.208 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:31:51.209 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.2378ms
2025-10-05 16:31:51.209 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:31:51.211 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:51.212 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2765ms
2025-10-05 16:31:51.358 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - null null
2025-10-05 16:31:51.359 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin/GetDashboardStats - 404 0 null 0.8648ms
2025-10-05 16:31:51.359 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Admin/GetDashboardStats, Response status code: 404
2025-10-05 16:31:54.622 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - null null
2025-10-05 16:31:54.625 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:54.641 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:31:54.648 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:54.649 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:31:54.650 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:31:54.655 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:31:54.674 +07:00 [INF] Executed ViewResult - view Books executed in 19.5615ms.
2025-10-05 16:31:54.674 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 32.5231ms
2025-10-05 16:31:54.674 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:54.674 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin - 200 null text/html; charset=utf-8 52.3273ms
2025-10-05 16:31:54.691 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:31:54.692 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.2629ms
2025-10-05 16:31:54.692 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:31:54.694 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:54.694 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2767ms
2025-10-05 16:31:57.707 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - null null
2025-10-05 16:31:57.708 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:57.708 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:31:57.710 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:57.712 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:31:57.714 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:31:57.715 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:31:57.719 +07:00 [INF] Executed ViewResult - view Books executed in 4.3227ms.
2025-10-05 16:31:57.719 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 10.9736ms
2025-10-05 16:31:57.719 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:57.720 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - 200 null text/html; charset=utf-8 12.7363ms
2025-10-05 16:31:57.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:31:57.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.9622ms
2025-10-05 16:31:57.739 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:31:57.740 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:57.740 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2642ms
2025-10-05 16:31:58.346 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - null null
2025-10-05 16:31:58.346 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:58.346 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:31:58.348 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:58.349 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:31:58.351 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:31:58.351 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:31:58.354 +07:00 [INF] Executed ViewResult - view Books executed in 2.3057ms.
2025-10-05 16:31:58.354 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 7.4285ms
2025-10-05 16:31:58.354 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:58.355 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - 200 null text/html; charset=utf-8 9.3414ms
2025-10-05 16:31:58.376 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:31:58.378 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.9454ms
2025-10-05 16:31:58.378 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:31:58.380 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:58.381 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3615ms
2025-10-05 16:31:58.653 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - null null
2025-10-05 16:31:58.654 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:58.654 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:31:58.656 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:58.657 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:31:58.660 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:31:58.661 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:31:58.663 +07:00 [INF] Executed ViewResult - view Books executed in 2.7633ms.
2025-10-05 16:31:58.663 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 9.003ms
2025-10-05 16:31:58.664 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:58.664 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - 200 null text/html; charset=utf-8 10.4634ms
2025-10-05 16:31:58.689 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:31:58.690 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.0637ms
2025-10-05 16:31:58.690 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:31:58.691 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:58.691 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1357ms
2025-10-05 16:31:58.920 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - null null
2025-10-05 16:31:58.921 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:58.922 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:31:58.923 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:58.924 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:31:58.927 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:31:58.927 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:31:58.931 +07:00 [INF] Executed ViewResult - view Books executed in 3.4875ms.
2025-10-05 16:31:58.931 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 9.3994ms
2025-10-05 16:31:58.931 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:58.932 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - 200 null text/html; charset=utf-8 11.4699ms
2025-10-05 16:31:58.951 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:31:58.952 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.2763ms
2025-10-05 16:31:58.952 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:31:58.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:58.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1684ms
2025-10-05 16:31:59.166 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - null null
2025-10-05 16:31:59.167 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:59.167 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:31:59.168 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:59.169 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:31:59.194 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:31:59.194 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:31:59.196 +07:00 [INF] Executed ViewResult - view Books executed in 1.3929ms.
2025-10-05 16:31:59.196 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 28.5269ms
2025-10-05 16:31:59.196 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:59.196 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - 200 null text/html; charset=utf-8 29.5198ms
2025-10-05 16:31:59.214 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:31:59.216 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.4097ms
2025-10-05 16:31:59.216 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:31:59.222 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:59.222 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2568ms
2025-10-05 16:31:59.471 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - null null
2025-10-05 16:31:59.472 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:59.472 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:31:59.473 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:59.474 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:31:59.476 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:31:59.476 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:31:59.479 +07:00 [INF] Executed ViewResult - view Books executed in 2.9329ms.
2025-10-05 16:31:59.480 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 7.9788ms
2025-10-05 16:31:59.480 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:59.480 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - 200 null text/html; charset=utf-8 9.2473ms
2025-10-05 16:31:59.500 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:31:59.502 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.1176ms
2025-10-05 16:31:59.502 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:31:59.503 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:59.504 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1872ms
2025-10-05 16:31:59.758 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - null null
2025-10-05 16:31:59.759 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:59.759 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:31:59.760 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:31:59.762 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:31:59.763 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:31:59.763 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:31:59.765 +07:00 [INF] Executed ViewResult - view Books executed in 1.7131ms.
2025-10-05 16:31:59.765 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 5.6852ms
2025-10-05 16:31:59.765 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:31:59.765 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - 200 null text/html; charset=utf-8 6.887ms
2025-10-05 16:31:59.788 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:31:59.789 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.018ms
2025-10-05 16:31:59.789 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:31:59.791 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:31:59.791 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1978ms
2025-10-05 16:32:00.045 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - null null
2025-10-05 16:32:00.046 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:00.047 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:32:00.048 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:32:00.049 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:32:00.051 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:32:00.052 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:32:00.055 +07:00 [INF] Executed ViewResult - view Books executed in 2.5538ms.
2025-10-05 16:32:00.055 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 8.0985ms
2025-10-05 16:32:00.055 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:00.055 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - 200 null text/html; charset=utf-8 9.6374ms
2025-10-05 16:32:00.089 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:32:00.091 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 2.2776ms
2025-10-05 16:32:00.091 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:32:00.093 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:32:00.093 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2114ms
2025-10-05 16:32:00.299 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - null null
2025-10-05 16:32:00.299 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:00.299 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:32:00.301 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:32:00.302 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:32:00.304 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:32:00.304 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:32:00.306 +07:00 [INF] Executed ViewResult - view Books executed in 2.4869ms.
2025-10-05 16:32:00.306 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 7.034ms
2025-10-05 16:32:00.307 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:00.307 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - 200 null text/html; charset=utf-8 8.1387ms
2025-10-05 16:32:00.330 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:32:00.331 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.1193ms
2025-10-05 16:32:00.331 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:32:00.339 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:32:00.339 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1715ms
2025-10-05 16:32:00.599 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - null null
2025-10-05 16:32:00.600 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:00.600 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:32:00.601 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:32:00.602 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:32:00.603 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:32:00.603 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:32:00.604 +07:00 [INF] Executed ViewResult - view Books executed in 1.19ms.
2025-10-05 16:32:00.604 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 4.2302ms
2025-10-05 16:32:00.604 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:00.605 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - 200 null text/html; charset=utf-8 5.2753ms
2025-10-05 16:32:00.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:32:00.631 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.8952ms
2025-10-05 16:32:00.631 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:32:00.632 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:32:00.632 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1349ms
2025-10-05 16:32:01.008 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - null null
2025-10-05 16:32:01.008 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:01.008 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:32:01.009 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:32:01.010 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:32:01.012 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:32:01.012 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:32:01.014 +07:00 [INF] Executed ViewResult - view Books executed in 1.7045ms.
2025-10-05 16:32:01.014 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 5.7443ms
2025-10-05 16:32:01.014 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:01.014 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - 200 null text/html; charset=utf-8 6.5442ms
2025-10-05 16:32:01.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:32:01.053 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 5.1712ms
2025-10-05 16:32:01.053 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:32:01.053 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:32:01.053 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1476ms
2025-10-05 16:32:11.069 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - null null
2025-10-05 16:32:11.070 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:11.070 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:32:11.072 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:32:11.074 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:32:11.075 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:32:11.076 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:32:11.079 +07:00 [INF] Executed ViewResult - view Books executed in 2.9603ms.
2025-10-05 16:32:11.079 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 9.3347ms
2025-10-05 16:32:11.079 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:11.081 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - 200 null text/html; charset=utf-8 11.423ms
2025-10-05 16:32:11.114 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:32:11.116 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 2.1899ms
2025-10-05 16:32:11.116 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:32:11.118 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:32:11.119 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2573ms
2025-10-05 16:32:11.903 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - null null
2025-10-05 16:32:11.904 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:11.916 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:32:11.918 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:32:11.920 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:32:11.920 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:32:11.921 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:32:11.948 +07:00 [INF] Executed ViewResult - view Books executed in 27.5802ms.
2025-10-05 16:32:11.948 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 32.3963ms
2025-10-05 16:32:11.948 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:11.948 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - 200 null text/html; charset=utf-8 45.1636ms
2025-10-05 16:32:11.966 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:32:11.968 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:32:11.968 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 2.1677ms
2025-10-05 16:32:11.968 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:32:11.968 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1627ms
2025-10-05 16:32:15.589 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - null null
2025-10-05 16:32:15.591 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:15.591 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:32:15.592 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:32:15.593 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:32:15.595 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:32:15.596 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:32:15.598 +07:00 [INF] Executed ViewResult - view Books executed in 2.2886ms.
2025-10-05 16:32:15.598 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 7.2833ms
2025-10-05 16:32:15.598 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:15.599 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=grid - 200 null text/html; charset=utf-8 9.9901ms
2025-10-05 16:32:15.617 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:32:15.620 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 2.29ms
2025-10-05 16:32:15.620 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:32:15.620 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:32:15.620 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1407ms
2025-10-05 16:32:16.294 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - null null
2025-10-05 16:32:16.295 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:16.295 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:32:16.296 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:32:16.297 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:32:16.299 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:32:16.299 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:32:16.301 +07:00 [INF] Executed ViewResult - view Books executed in 2.0188ms.
2025-10-05 16:32:16.301 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 5.7899ms
2025-10-05 16:32:16.301 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:16.301 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - 200 null text/html; charset=utf-8 6.8767ms
2025-10-05 16:32:16.329 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:32:16.330 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.186ms
2025-10-05 16:32:16.330 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:32:16.332 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:32:16.332 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2188ms
2025-10-05 16:32:22.405 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5232/api/cart/add/6 - null 0
2025-10-05 16:32:22.405 +07:00 [INF] CORS policy execution failed.
2025-10-05 16:32:22.405 +07:00 [INF] Request origin http://localhost:5232 does not have permission to access the resource.
2025-10-05 16:32:22.406 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5232/api/cart/add/6 - 404 0 null 1.2829ms
2025-10-05 16:32:22.406 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5232/api/cart/add/6, Response status code: 404
2025-10-05 16:32:22.766 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5232/api/cart/add/6 - null 0
2025-10-05 16:32:22.768 +07:00 [INF] CORS policy execution failed.
2025-10-05 16:32:22.768 +07:00 [INF] Request origin http://localhost:5232 does not have permission to access the resource.
2025-10-05 16:32:22.769 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5232/api/cart/add/6 - 404 0 null 2.8506ms
2025-10-05 16:32:22.769 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5232/api/cart/add/6, Response status code: 404
2025-10-05 16:32:22.930 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5232/api/cart/add/6 - null 0
2025-10-05 16:32:22.931 +07:00 [INF] CORS policy execution failed.
2025-10-05 16:32:22.931 +07:00 [INF] Request origin http://localhost:5232 does not have permission to access the resource.
2025-10-05 16:32:22.931 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5232/api/cart/add/6 - 404 0 null 1.1173ms
2025-10-05 16:32:22.932 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5232/api/cart/add/6, Response status code: 404
2025-10-05 16:32:23.080 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5232/api/cart/add/6 - null 0
2025-10-05 16:32:23.080 +07:00 [INF] CORS policy execution failed.
2025-10-05 16:32:23.080 +07:00 [INF] Request origin http://localhost:5232 does not have permission to access the resource.
2025-10-05 16:32:23.081 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5232/api/cart/add/6 - 404 0 null 0.9651ms
2025-10-05 16:32:23.081 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5232/api/cart/add/6, Response status code: 404
2025-10-05 16:32:26.326 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books/create?area=Admin - null null
2025-10-05 16:32:26.326 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC)'
2025-10-05 16:32:26.329 +07:00 [INF] Route matched with {action = "CreateBook", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:32:26.333 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:32:26.337 +07:00 [INF] Executing ViewResult, running view CreateBook.
2025-10-05 16:32:26.439 +07:00 [INF] Executed ViewResult - view CreateBook executed in 102.8105ms.
2025-10-05 16:32:26.439 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC) in 109.6642ms
2025-10-05 16:32:26.439 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC)'
2025-10-05 16:32:26.439 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books/create?area=Admin - 200 null text/html; charset=utf-8 113.4805ms
2025-10-05 16:32:26.455 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-10-05 16:32:26.456 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.8624ms
2025-10-05 16:32:26.456 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-10-05 16:32:26.458 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:32:26.458 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - null null
2025-10-05 16:32:26.458 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1584ms
2025-10-05 16:32:26.459 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - 404 0 null 0.8418ms
2025-10-05 16:32:26.459 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js, Response status code: 404
2025-10-05 16:32:29.000 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - null null
2025-10-05 16:32:29.001 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:29.001 +07:00 [INF] Route matched with {action = "Books", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Books(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-10-05 16:32:29.002 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-10-05 16:32:29.003 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[AdditionalImages], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[AdditionalImages], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-10-05 16:32:29.005 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-10-05 16:32:29.005 +07:00 [INF] Executing ViewResult, running view Books.
2025-10-05 16:32:29.006 +07:00 [INF] Executed ViewResult - view Books executed in 1.3747ms.
2025-10-05 16:32:29.006 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC) in 5.2849ms
2025-10-05 16:32:29.006 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Books (BookStoreMVC)'
2025-10-05 16:32:29.007 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books?area=Admin&viewMode=list - 200 null text/html; charset=utf-8 6.1161ms
2025-10-05 16:32:29.032 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-10-05 16:32:29.032 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1446ms
